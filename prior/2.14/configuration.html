<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>pgBackRest Configuration Reference</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta><meta property="og:site_name" content="pgBackRestReliable PostgreSQL Backup &amp; Restore"></meta><meta property="og:title" content="pgBackRest Configuration Reference"></meta><meta property="og:type" content="website"></meta><link rel="icon" href="favicon.png" type="image/png"></link><meta property="og:image:type" content="image/png"></meta><meta property="og:image" content="http://www.pgbackrest.org/logo.png"></meta><meta name="description" content="The pgBackRest Configuration Reference details all configuration options."></meta><meta property="og:description" content="The pgBackRest Configuration Reference details all configuration options."></meta><link rel="stylesheet" href="default.css" type="text/css"></link></head><body><div class="page-header"><div class="page-header-title">pgBackRest Configuration Reference</div></div><div class="page-menu"><div class="menu-body"><div class="menu"><a class="menu-link" href="index.html">Home</a></div><div class="menu"><a class="menu-link" href="user-guide-index.html">User Guides</a></div><div class="menu"><a class="menu-link" href="command.html">Commands</a></div><div class="menu"><a class="menu-link" href="metric.html">Metrics</a></div></div></div><div class="page-toc"><div class="page-toc-header"><div class="page-toc-title">Table of Contents</div></div><div class="page-toc-body"><div class="section1-toc"><div class="section1-toc-number">1</div><div class="section1-toc-title"><a href="#introduction">Introduction</a></div></div><div class="section1-toc"><div class="section1-toc-number">2</div><div class="section1-toc-title"><a href="#section-archive">Archive Options (<span class="id">archive</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">2.1</div><div class="section2-toc-title"><a href="#section-archive/option-archive-async">Asynchronous Archiving Option (<span class="id">--archive-async</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.2</div><div class="section2-toc-title"><a href="#section-archive/option-archive-get-queue-max">Maximum Archive Get Queue Size Option (<span class="id">--archive-get-queue-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.3</div><div class="section2-toc-title"><a href="#section-archive/option-archive-push-queue-max">Maximum Archive Push Queue Size Option (<span class="id">--archive-push-queue-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">2.4</div><div class="section2-toc-title"><a href="#section-archive/option-archive-timeout">Archive Timeout Option (<span class="id">--archive-timeout</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">3</div><div class="section1-toc-title"><a href="#section-backup">Backup Options (<span class="id">backup</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">3.1</div><div class="section2-toc-title"><a href="#section-backup/option-archive-check">Check Archive Option (<span class="id">--archive-check</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.2</div><div class="section2-toc-title"><a href="#section-backup/option-archive-copy">Copy Archive Option (<span class="id">--archive-copy</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.3</div><div class="section2-toc-title"><a href="#section-backup/option-backup-standby">Backup from Standby Option (<span class="id">--backup-standby</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.4</div><div class="section2-toc-title"><a href="#section-backup/option-checksum-page">Page Checksums Option (<span class="id">--checksum-page</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.5</div><div class="section2-toc-title"><a href="#section-backup/option-exclude">Path/File Exclusions Option (<span class="id">--exclude</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.6</div><div class="section2-toc-title"><a href="#section-backup/option-manifest-save-threshold">Manifest Save Threshold Option (<span class="id">--manifest-save-threshold</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.7</div><div class="section2-toc-title"><a href="#section-backup/option-resume">Resume Option (<span class="id">--resume</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.8</div><div class="section2-toc-title"><a href="#section-backup/option-start-fast">Start Fast Option (<span class="id">--start-fast</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">3.9</div><div class="section2-toc-title"><a href="#section-backup/option-stop-auto">Stop Auto Option (<span class="id">--stop-auto</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">4</div><div class="section1-toc-title"><a href="#section-general">General Options (<span class="id">general</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">4.1</div><div class="section2-toc-title"><a href="#section-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.2</div><div class="section2-toc-title"><a href="#section-general/option-cmd-ssh">SSH client command Option (<span class="id">--cmd-ssh</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.3</div><div class="section2-toc-title"><a href="#section-general/option-compress">Compress Option (<span class="id">--compress</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.4</div><div class="section2-toc-title"><a href="#section-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.5</div><div class="section2-toc-title"><a href="#section-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.6</div><div class="section2-toc-title"><a href="#section-general/option-db-timeout">Database Timeout Option (<span class="id">--db-timeout</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.7</div><div class="section2-toc-title"><a href="#section-general/option-delta">Delta Option (<span class="id">--delta</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.8</div><div class="section2-toc-title"><a href="#section-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.9</div><div class="section2-toc-title"><a href="#section-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.10</div><div class="section2-toc-title"><a href="#section-general/option-process-max">Process Maximum Option (<span class="id">--process-max</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.11</div><div class="section2-toc-title"><a href="#section-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">4.12</div><div class="section2-toc-title"><a href="#section-general/option-spool-path">Spool Path Option (<span class="id">--spool-path</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">5</div><div class="section1-toc-title"><a href="#section-log">Log Options (<span class="id">log</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">5.1</div><div class="section2-toc-title"><a href="#section-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.2</div><div class="section2-toc-title"><a href="#section-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.3</div><div class="section2-toc-title"><a href="#section-log/option-log-level-stderr">Std Error Log Level Option (<span class="id">--log-level-stderr</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.4</div><div class="section2-toc-title"><a href="#section-log/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.5</div><div class="section2-toc-title"><a href="#section-log/option-log-subprocess">Log Subprocesses Option (<span class="id">--log-subprocess</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">5.6</div><div class="section2-toc-title"><a href="#section-log/option-log-timestamp">Log Timestamp Option (<span class="id">--log-timestamp</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">6</div><div class="section1-toc-title"><a href="#section-repository">Repository Options (<span class="id">repository</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">6.1</div><div class="section2-toc-title"><a href="#section-repository/option-repo-cipher-pass">Repository Cipher Passphrase Option (<span class="id">--repo-cipher-pass</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.2</div><div class="section2-toc-title"><a href="#section-repository/option-repo-cipher-type">Repository Cipher Type Option (<span class="id">--repo-cipher-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.3</div><div class="section2-toc-title"><a href="#section-repository/option-repo-hardlink">Repository Hardlink Option (<span class="id">--repo-hardlink</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.4</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host">Repository Host Option (<span class="id">--repo-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.5</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-cmd">Repository Host Command Option (<span class="id">--repo-host-cmd</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.6</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config">Repository Host Configuration Option (<span class="id">--repo-host-config</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.7</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config-include-path">Repository Host Configuration Include Path Option (<span class="id">--repo-host-config-include-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.8</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-config-path">Repository Host Configuration Path Option (<span class="id">--repo-host-config-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.9</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-port">Repository Host Port Option (<span class="id">--repo-host-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.10</div><div class="section2-toc-title"><a href="#section-repository/option-repo-host-user">Repository Host User Option (<span class="id">--repo-host-user</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.11</div><div class="section2-toc-title"><a href="#section-repository/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.12</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-archive">Archive Retention Option (<span class="id">--repo-retention-archive</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.13</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-archive-type">Archive Retention Type Option (<span class="id">--repo-retention-archive-type</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.14</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-diff">Differential Retention Option (<span class="id">--repo-retention-diff</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.15</div><div class="section2-toc-title"><a href="#section-repository/option-repo-retention-full">Full Retention Option (<span class="id">--repo-retention-full</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.16</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-bucket">S3 Repository Bucket Option (<span class="id">--repo-s3-bucket</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.17</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-ca-file">S3 SSL CA File Option (<span class="id">--repo-s3-ca-file</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.18</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-ca-path">S3 SSL CA Path Option (<span class="id">--repo-s3-ca-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.19</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-endpoint">S3 Repository Endpoint Option (<span class="id">--repo-s3-endpoint</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.20</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-host">S3 Repository Host Option (<span class="id">--repo-s3-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.21</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-key">S3 Repository Access Key Option (<span class="id">--repo-s3-key</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.22</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-key-secret">S3 Repository Secret Access Key Option (<span class="id">--repo-s3-key-secret</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.23</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-region">S3 Repository Region Option (<span class="id">--repo-s3-region</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.24</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-token">S3 Repository Security Token Option (<span class="id">--repo-s3-token</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.25</div><div class="section2-toc-title"><a href="#section-repository/option-repo-s3-verify-ssl">S3 Repository Verify SSL Option (<span class="id">--repo-s3-verify-ssl</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">6.26</div><div class="section2-toc-title"><a href="#section-repository/option-repo-type">Repository Type Option (<span class="id">--repo-type</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">7</div><div class="section1-toc-title"><a href="#section-restore">Restore Options (<span class="id">restore</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">7.1</div><div class="section2-toc-title"><a href="#section-restore/option-db-include">Include Database Option (<span class="id">--db-include</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.2</div><div class="section2-toc-title"><a href="#section-restore/option-link-all">Link All Option (<span class="id">--link-all</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.3</div><div class="section2-toc-title"><a href="#section-restore/option-link-map">Link Map Option (<span class="id">--link-map</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.4</div><div class="section2-toc-title"><a href="#section-restore/option-recovery-option">Recovery Option Option (<span class="id">--recovery-option</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.5</div><div class="section2-toc-title"><a href="#section-restore/option-tablespace-map">Tablespace Map Option (<span class="id">--tablespace-map</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">7.6</div><div class="section2-toc-title"><a href="#section-restore/option-tablespace-map-all">Map All Tablespaces Option (<span class="id">--tablespace-map-all</span>)</a></div></div></div><div class="section1-toc"><div class="section1-toc-number">8</div><div class="section1-toc-title"><a href="#section-stanza">Stanza Options (<span class="id">stanza</span>)</a></div><div class="section2-toc"><div class="section2-toc-number">8.1</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host">PostgreSQL Host Option (<span class="id">--pg-host</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.2</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-cmd">PostgreSQL Host Command Option (<span class="id">--pg-host-cmd</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.3</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config">PostgreSQL Host Configuration Option (<span class="id">--pg-host-config</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.4</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config-include-path">PostgreSQL Host Configuration Include Path Option (<span class="id">--pg-host-config-include-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.5</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-config-path">PostgreSQL Host Configuration Path Option (<span class="id">--pg-host-config-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.6</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-port">PostgreSQL Host Port Option (<span class="id">--pg-host-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.7</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-host-user">PostgreSQL Host User Option (<span class="id">--pg-host-user</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.8</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-path">PostgreSQL Path Option (<span class="id">--pg-path</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.9</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-port">PostgreSQL Port Option (<span class="id">--pg-port</span>)</a></div></div><div class="section2-toc"><div class="section2-toc-number">8.10</div><div class="section2-toc-title"><a href="#section-stanza/option-pg-socket-path">PostgreSQL Socket Path Option (<span class="id">--pg-socket-path</span>)</a></div></div></div></div></div><div class="page-body"><div class="section1"><a id="introduction"></a><div class="section1-header"><div class="section1-number">1</div><div class="section1-title">Introduction</div></div><div class="section-intro"><span class="backrest">pgBackRest</span> can be used entirely with command-line parameters but a configuration file is more practical for installations that are complex or set a lot of options. The default location for the configuration file is <span class="file">/etc/pgbackrest/pgbackrest.conf</span>. If no file exists in that location then the old default of <span class="file">/etc/pgbackrest.conf</span> will be checked.</div><div class="section-body"></div></div><div class="section1"><a id="section-archive"></a><div class="section1-header"><div class="section1-number">2</div><div class="section1-title">Archive Options (<span class="id">archive</span>)</div></div><div class="section-intro">The <span class="br-setting">archive</span> section defines options for the <span class="cmd">archive-push</span> and <span class="cmd">archive-get</span> commands.</div><div class="section-body"><div class="section2"><a id="section-archive/option-archive-async"></a><div class="section2-header"><div class="section2-number">2.1</div><div class="section2-title">Asynchronous Archiving Option (<span class="id">--archive-async</span>)</div></div><div class="section-body"><div class="section-body-text">Push/get WAL segments asynchronously.</div><div class="section-body-text">Enables asynchronous operation for the <span class="cmd">archive-push</span> and <span class="cmd">archive-get</span> commands.<br/>
<br/>
Asynchronous operation is more efficient because it can reuse connections and take advantage of parallelism. See the <span class="br-option">spool-path</span>, <span class="br-option">archive-get-queue-max</span>, and <span class="br-option">archive-push-queue-max</span> options for more information.</div><pre class="code-block">default: n
example: archive-async=y</pre></div></div><div class="section2"><a id="section-archive/option-archive-get-queue-max"></a><div class="section2-header"><div class="section2-number">2.2</div><div class="section2-title">Maximum Archive Get Queue Size Option (<span class="id">--archive-get-queue-max</span>)</div></div><div class="section-body"><div class="section-body-text">Maximum size of the <span class="backrest">pgBackRest</span> archive-get queue.</div><div class="section-body-text">Specifies the maximum size of the <span class="cmd">archive-get</span> queue when <span class="br-option">archive-async</span> is enabled. The queue is stored in the <span class="br-option">spool-path</span> and is used to speed providing WAL to <span class="postgres">PostgreSQL</span>.<br/>
<br/>
Size can be entered in bytes (default) or KB, MB, GB, TB, or PB where the multiplier is a power of 1024.</div><pre class="code-block">default: 134217728
allowed: 0-4503599627370496
example: archive-get-queue-max=1073741824</pre></div></div><div class="section2"><a id="section-archive/option-archive-push-queue-max"></a><div class="section2-header"><div class="section2-number">2.3</div><div class="section2-title">Maximum Archive Push Queue Size Option (<span class="id">--archive-push-queue-max</span>)</div></div><div class="section-body"><div class="section-body-text">Maximum size of the <span class="postgres">PostgreSQL</span> archive queue.</div><div class="section-body-text">After the limit is reached, the following will happen:<br/>
<ol><li><span class="backrest">pgBackRest</span> will notify <span class="postgres">PostgreSQL</span> that the WAL was successfully archived, then <b>DROP IT</b>.</li><li>A warning will be output to the Postgres log.</li></ol>If this occurs then the archive log stream will be interrupted and PITR will not be possible past that point. A new backup will be required to regain full restore capability.<br/>
<br/>
In asynchronous mode the entire queue will be dropped to prevent spurts of WAL getting through before the queue limit is exceeded again.<br/>
<br/>
The purpose of this feature is to prevent the log volume from filling up at which point Postgres will stop completely. Better to lose the backup than have <span class="postgres">PostgreSQL</span> go down.<br/>
<br/>
Size can be entered in bytes (default) or KB, MB, GB, TB, or PB where the multiplier is a power of 1024.</div><pre class="code-block">allowed: 0-4503599627370496
example: archive-push-queue-max=1GB</pre><div class="section-body-text">Deprecated Name: archive-queue-max</div></div></div><div class="section2"><a id="section-archive/option-archive-timeout"></a><div class="section2-header"><div class="section2-number">2.4</div><div class="section2-title">Archive Timeout Option (<span class="id">--archive-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Archive timeout.</div><div class="section-body-text">Set maximum time, in seconds, to wait for each WAL segment to reach the <span class="backrest">pgBackRest</span> archive repository. The timeout applies to the <span class="cmd">check</span> and <span class="cmd">backup</span> commands when waiting for WAL segments required for backup consistency to be archived.</div><pre class="code-block">default: 60
allowed: 0.1-86400
example: archive-timeout=30</pre></div></div></div></div><div class="section1"><a id="section-backup"></a><div class="section1-header"><div class="section1-number">3</div><div class="section1-title">Backup Options (<span class="id">backup</span>)</div></div><div class="section-intro">The <span class="br-setting">backup</span> section defines settings related to backup.</div><div class="section-body"><div class="section2"><a id="section-backup/option-archive-check"></a><div class="section2-header"><div class="section2-number">3.1</div><div class="section2-title">Check Archive Option (<span class="id">--archive-check</span>)</div></div><div class="section-body"><div class="section-body-text">Check that WAL segments are in the archive before backup completes.</div><div class="section-body-text">Checks that all WAL segments required to make the backup consistent are present in the WAL archive. It's a good idea to leave this as the default unless you are using another method for archiving.<br/>
<br/>
This option must be enabled if <span class="br-option">archive-copy</span> is enabled.</div><pre class="code-block">default: y
example: archive-check=n</pre></div></div><div class="section2"><a id="section-backup/option-archive-copy"></a><div class="section2-header"><div class="section2-number">3.2</div><div class="section2-title">Copy Archive Option (<span class="id">--archive-copy</span>)</div></div><div class="section-body"><div class="section-body-text">Copy WAL segments needed for consistency to the backup.</div><div class="section-body-text">This slightly paranoid option protects against corruption in the WAL segment archive by storing the WAL segments required for consistency directly in the backup. WAL segments are still stored in the archive so this option will use additional space.<br/>
<br/>
On restore, the WAL segments will be present in <span class="path">pg_xlog/pg_wal</span> and <span class="postgres">PostgreSQL</span> will use them in preference to calling the <span class="id">restore_command</span>.<br/>
<br/>
The <span class="br-option">archive-check</span> option must be enabled if <span class="br-option">archive-copy</span> is enabled.</div><pre class="code-block">default: n
example: archive-copy=y</pre></div></div><div class="section2"><a id="section-backup/option-backup-standby"></a><div class="section2-header"><div class="section2-number">3.3</div><div class="section2-title">Backup from Standby Option (<span class="id">--backup-standby</span>)</div></div><div class="section-body"><div class="section-body-text">Backup from the standby cluster.</div><div class="section-body-text">Enable backup from standby to reduce load on the primary cluster. This option requires that both the <span class="host">primary</span> and <span class="host">standby</span> hosts be configured.</div><pre class="code-block">default: n
example: backup-standby=y</pre></div></div><div class="section2"><a id="section-backup/option-checksum-page"></a><div class="section2-header"><div class="section2-number">3.4</div><div class="section2-title">Page Checksums Option (<span class="id">--checksum-page</span>)</div></div><div class="section-body"><div class="section-body-text">Validate data page checksums.</div><div class="section-body-text">Directs <span class="backrest">pgBackRest</span> to validate all data page checksums while backing up a cluster. This option is automatically enabled when data page checksums are enabled on the cluster.<br/>
<br/>
Failures in checksum validation will not abort a backup. Rather, warnings will be emitted in the log (and to the console with default settings) and the list of invalid pages will be stored in the backup manifest.</div><pre class="code-block">example: checksum-page=n</pre></div></div><div class="section2"><a id="section-backup/option-exclude"></a><div class="section2-header"><div class="section2-number">3.5</div><div class="section2-title">Path/File Exclusions Option (<span class="id">--exclude</span>)</div></div><div class="section-body"><div class="section-body-text">Exclude paths/files from the backup.</div><div class="section-body-text">All exclusions are relative to <span class="path">$PGDATA</span>. If the exclusion ends with / then only files in the specified directory will be excluded, e.g. <span class="br-option">--exclude=junk/</span> will exclude all files in the <span class="path">$PGDATA/junk</span> directory but include the directory itself. If the exclusion does not end with / then the file may match the exclusion exactly or match with / appended to the exclusion, e.g. <span class="br-option">--exclude=junk</span> will exclude the <span class="path">$PGDATA/junk</span> directory and all the files it contains.<br/>
<br/>
<b>Be careful using this feature -- it is very easy to exclude something critical that will make the backup inconsistent. Be sure to test your restores!</b><br/>
<br/>
All excluded files will be logged at <span class="id">info</span> level along with the exclusion rule. Be sure to audit the list of excluded files to ensure nothing unexpected is being excluded.<div class="admonition"><div class="note">NOTE:</div><div class="note-text">Exclusions are not honored on delta restores. Any files/directories that were excluded by the backup will be <i>removed</i> on delta restore.</div></div>This option should not be used to exclude <span class="postgres">PostgreSQL</span> logs from a backup. Logs can be moved out of the <span class="id">PGDATA</span> directory using the <span class="postgres">PostgreSQL</span> <span class="br-setting">log_directory</span> setting, which has the benefit of allowing logs to be preserved after a restore.<br/>
<br/>
Multiple exclusions may be specified on the command-line or in a configuration file.</div><pre class="code-block">example: exclude=junk/</pre></div></div><div class="section2"><a id="section-backup/option-manifest-save-threshold"></a><div class="section2-header"><div class="section2-number">3.6</div><div class="section2-title">Manifest Save Threshold Option (<span class="id">--manifest-save-threshold</span>)</div></div><div class="section-body"><div class="section-body-text">Manifest save threshold during backup.</div><div class="section-body-text">Defines how often the manifest will be saved during a backup. Saving the manifest is important because it stores the checksums and allows the resume function to work efficiently. The actual threshold used is 1% of the backup size or <span class="br-setting">manifest-save-threshold</span>, whichever is greater.<br/>
<br/>
Size can be entered in bytes (default) or KB, MB, GB, TB, or PB where the multiplier is a power of 1024.</div><pre class="code-block">default: 1073741824
allowed: 1-1099511627776
example: manifest-save-threshold=5G</pre></div></div><div class="section2"><a id="section-backup/option-resume"></a><div class="section2-header"><div class="section2-number">3.7</div><div class="section2-title">Resume Option (<span class="id">--resume</span>)</div></div><div class="section-body"><div class="section-body-text">Allow resume of failed backup.</div><div class="section-body-text">Defines whether the resume feature is enabled. Resume can greatly reduce the amount of time required to run a backup after a previous backup of the same type has failed. It adds complexity, however, so it may be desirable to disable in environments that do not require the feature.</div><pre class="code-block">default: y
example: resume=n</pre></div></div><div class="section2"><a id="section-backup/option-start-fast"></a><div class="section2-header"><div class="section2-number">3.8</div><div class="section2-title">Start Fast Option (<span class="id">--start-fast</span>)</div></div><div class="section-body"><div class="section-body-text">Force a checkpoint to start backup quickly.</div><div class="section-body-text">Forces a checkpoint (by passing <span class="id">y</span> to the <span class="id">fast</span> parameter of <span class="id">pg_start_backup()</span>) so the backup begins immediately. Otherwise the backup will start after the next regular checkpoint.<br/>
<br/>
This feature only works in <span class="postgres">PostgreSQL</span> >= <span class="id">8.4</span>.</div><pre class="code-block">default: n
example: start-fast=y</pre></div></div><div class="section2"><a id="section-backup/option-stop-auto"></a><div class="section2-header"><div class="section2-number">3.9</div><div class="section2-title">Stop Auto Option (<span class="id">--stop-auto</span>)</div></div><div class="section-body"><div class="section-body-text">Stop prior failed backup on new backup.</div><div class="section-body-text">This will only be done if an exclusive advisory lock can be acquired to demonstrate that the prior failed backup process has really stopped.<br/>
<br/>
This feature relies on pg_is_in_backup() so only works on <span class="postgres">PostgreSQL</span> >= <span class="id">9.3</span>.<br/>
<br/>
The setting is disabled by default because it assumes that <span class="backrest">pgBackRest</span> is the only process doing exclusive online backups. It depends on an advisory lock that only <span class="backrest">pgBackRest</span> sets so it may abort other processes that do exclusive online backups. Note that <span class="cmd">base_backup</span> and <span class="cmd">pg_dump</span> are safe to use with this setting because they do not call <span class="id">pg_start_backup()</span> so are not exclusive.</div><pre class="code-block">default: n
example: stop-auto=y</pre></div></div></div></div><div class="section1"><a id="section-general"></a><div class="section1-header"><div class="section1-number">4</div><div class="section1-title">General Options (<span class="id">general</span>)</div></div><div class="section-intro">The <span class="br-setting">general</span> section defines options that are common for many commands.</div><div class="section-body"><div class="section2"><a id="section-general/option-buffer-size"></a><div class="section2-header"><div class="section2-number">4.1</div><div class="section2-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div></div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.<br/>
<br/>
Size can be entered in bytes (default) or KB, MB, GB, TB, or PB where the multiplier is a power of 1024. For example, the case-insensitive value 32k (or 32KB) can be used instead of 32768.<br/>
<br/>
Allowed values, in bytes, are <span class="id">16384</span>, <span class="id">32768</span>, <span class="id">65536</span>, <span class="id">131072</span>, <span class="id">262144</span>, <span class="id">524288</span>, <span class="id">1048576</span>, <span class="id">2097152</span>, <span class="id">4194304</span>, <span class="id">8388608</span>, and <span class="id">16777216</span>.</div><pre class="code-block">default: 4194304
example: buffer-size=32K</pre></div></div><div class="section2"><a id="section-general/option-cmd-ssh"></a><div class="section2-header"><div class="section2-number">4.2</div><div class="section2-title">SSH client command Option (<span class="id">--cmd-ssh</span>)</div></div><div class="section-body"><div class="section-body-text">Path to ssh client executable.</div><div class="section-body-text">Use a specific SSH client when an alternate is desired or the <span class="file">ssh</span> executable is not in $PATH.</div><pre class="code-block">default: ssh
example: cmd-ssh=/usr/bin/ssh</pre></div></div><div class="section2"><a id="section-general/option-compress"></a><div class="section2-header"><div class="section2-number">4.3</div><div class="section2-title">Compress Option (<span class="id">--compress</span>)</div></div><div class="section-body"><div class="section-body-text">Use gzip file compression.</div><div class="section-body-text">Backup files are compatible with command-line gzip tools.</div><pre class="code-block">default: y
example: compress=n</pre></div></div><div class="section2"><a id="section-general/option-compress-level"></a><div class="section2-header"><div class="section2-number">4.4</div><div class="section2-title">Compress Level Option (<span class="id">--compress-level</span>)</div></div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: compress-level=9</pre></div></div><div class="section2"><a id="section-general/option-compress-level-network"></a><div class="section2-header"><div class="section2-number">4.5</div><div class="section2-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div></div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the repository. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: compress-level-network=1</pre></div></div><div class="section2"><a id="section-general/option-db-timeout"></a><div class="section2-header"><div class="section2-number">4.6</div><div class="section2-title">Database Timeout Option (<span class="id">--db-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Database query timeout.</div><div class="section-body-text">Sets the timeout, in seconds, for queries against the database. This includes the <span class="id">pg_start_backup()</span> and <span class="id">pg_stop_backup()</span> functions which can each take a substantial amount of time. Because of this the timeout should be kept high unless you know that these functions will return quickly (i.e. if you have set <span class="br-setting">startfast=y</span> and you know that the database cluster will not generate many WAL segments during the backup).</div><pre class="code-block">default: 1800
allowed: 0.1-604800
example: db-timeout=600</pre></div></div><div class="section2"><a id="section-general/option-delta"></a><div class="section2-header"><div class="section2-number">4.7</div><div class="section2-title">Delta Option (<span class="id">--delta</span>)</div></div><div class="section-body"><div class="section-body-text">Restore or backup using checksums.</div><div class="section-body-text">During a restore, by default the <span class="postgres">PostgreSQL</span> data and tablespace directories are expected to be present but empty. This option performs a delta restore using checksums.<br/>
<br/>
During a backup, this option will use checksums instead of the timestamps to determine if files will be copied.</div><pre class="code-block">default: n
example: delta=y</pre></div></div><div class="section2"><a id="section-general/option-lock-path"></a><div class="section2-header"><div class="section2-number">4.8</div><div class="section2-title">Lock Path Option (<span class="id">--lock-path</span>)</div></div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: lock-path=/backup/db/lock</pre></div></div><div class="section2"><a id="section-general/option-neutral-umask"></a><div class="section2-header"><div class="section2-number">4.9</div><div class="section2-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div></div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: neutral-umask=n</pre></div></div><div class="section2"><a id="section-general/option-process-max"></a><div class="section2-header"><div class="section2-number">4.10</div><div class="section2-title">Process Maximum Option (<span class="id">--process-max</span>)</div></div><div class="section-body"><div class="section-body-text">Max processes to use for compress/transfer.</div><div class="section-body-text">Each process will perform compression and transfer to make the command run faster, but don't set <span class="br-setting">process-max</span> so high that it impacts database performance.</div><pre class="code-block">default: 1
allowed: 1-999
example: process-max=4</pre></div></div><div class="section2"><a id="section-general/option-protocol-timeout"></a><div class="section2-header"><div class="section2-number">4.11</div><div class="section2-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div></div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the local or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: protocol-timeout=630</pre></div></div><div class="section2"><a id="section-general/option-spool-path"></a><div class="section2-header"><div class="section2-number">4.12</div><div class="section2-title">Spool Path Option (<span class="id">--spool-path</span>)</div></div><div class="section-body"><div class="section-body-text">Path where transient data is stored.</div><div class="section-body-text">This path is used to store data for the asynchronous <span class="cmd">archive-push</span> and <span class="cmd">archive-get</span> command.<br/>
<br/>
The asynchronous <span class="cmd">archive-push</span> command writes acknowledgements into the spool path when it has successfully stored WAL in the archive (and errors on failure) so the foreground process can quickly notify <span class="postgres">PostgreSQL</span>. Acknowledgement files are very small (zero on success and a few hundred bytes on error).<br/>
<br/>
The asynchronous <span class="cmd">archive-push</span> process queues WAL in the spool path so it can be provided very quickly when <span class="postgres">PostgreSQL</span> requests it. Moving files to <span class="postgres">PostgreSQL</span> is most efficient when the spool path is on the same filesystem as <span class="path">pg_xlog</span>/<span class="path">pg_wal</span>.<br/>
<br/>
The data stored in the spool path is not strictly temporary since it can and should survive a reboot. However, loss of the data in the spool path is not a problem. <span class="backrest">pgBackRest</span> will simply recheck each WAL segment to ensure it is safely archived for <span class="cmd">archive-push</span> and rebuild the queue for <span class="cmd">archive-get</span>.<br/>
<br/>
The spool path is intended to be located on a local Posix-compatible filesystem, not a remote filesystem such as <span class="host">NFS</span> or <span class="host">CIFS</span>.</div><pre class="code-block">default: /var/spool/pgbackrest
example: spool-path=/backup/db/spool</pre></div></div></div></div><div class="section1"><a id="section-log"></a><div class="section1-header"><div class="section1-number">5</div><div class="section1-title">Log Options (<span class="id">log</span>)</div></div><div class="section-intro">The <span class="br-setting">log</span> section defines logging-related settings.<div class="admonition"><div class="caution">CAUTION:</div><div class="caution-text">Trace-level logging may expose secrets such as keys and passwords. Use with caution!</div></div></div><div class="section-body"><div class="section2"><a id="section-log/option-log-level-console"></a><div class="section2-header"><div class="section2-number">5.1</div><div class="section2-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div></div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: log-level-console=error</pre></div></div><div class="section2"><a id="section-log/option-log-level-file"></a><div class="section2-header"><div class="section2-number">5.2</div><div class="section2-title">File Log Level Option (<span class="id">--log-level-file</span>)</div></div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: log-level-file=debug</pre></div></div><div class="section2"><a id="section-log/option-log-level-stderr"></a><div class="section2-header"><div class="section2-number">5.3</div><div class="section2-title">Std Error Log Level Option (<span class="id">--log-level-stderr</span>)</div></div><div class="section-body"><div class="section-body-text">Level for stderr logging.</div><div class="section-body-text">Specifies which log levels will output to <span class="id">stderr</span> rather than <span class="id">stdout</span> (specified by <span class="br-option">log-level-console</span>). The timestamp and process will not be output to <span class="id">stderr</span>.<br/>
<br/>
The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: log-level-stderr=error</pre></div></div><div class="section2"><a id="section-log/option-log-path"></a><div class="section2-header"><div class="section2-number">5.4</div><div class="section2-title">Log Path Option (<span class="id">--log-path</span>)</div></div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=off</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: log-path=/backup/db/log</pre></div></div><div class="section2"><a id="section-log/option-log-subprocess"></a><div class="section2-header"><div class="section2-number">5.5</div><div class="section2-title">Log Subprocesses Option (<span class="id">--log-subprocess</span>)</div></div><div class="section-body"><div class="section-body-text">Enable logging in subprocesses.</div><div class="section-body-text">Enable file logging for any subprocesses created by this process using the log level specified by <span class="br-option">log-level-file</span>.</div><pre class="code-block">default: n
example: log-subprocess=y</pre></div></div><div class="section2"><a id="section-log/option-log-timestamp"></a><div class="section2-header"><div class="section2-number">5.6</div><div class="section2-title">Log Timestamp Option (<span class="id">--log-timestamp</span>)</div></div><div class="section-body"><div class="section-body-text">Enable timestamp in logging.</div><div class="section-body-text">Enables the timestamp in console and file logging. This option is disabled in special situations such as generating documentation.</div><pre class="code-block">default: y
example: log-timestamp=n</pre></div></div></div></div><div class="section1"><a id="section-repository"></a><div class="section1-header"><div class="section1-number">6</div><div class="section1-title">Repository Options (<span class="id">repository</span>)</div></div><div class="section-intro">The <span class="br-setting">repository</span> section defines options used to configure the repository.<br/>
<br/>
<b>Indexing</b>: All <span class="br-setting">repo-</span> options are indexed to allow for configuring multiple repositories, though only a single repository is currently supported. For example, the repository is configured with the <span class="br-setting">repo1-path</span>, <span class="br-setting">repo1-host</span>, etc. options.<br/>
<br/>
The <span class="br-setting">repo-retention-*</span> options define how long backups will be retained. Expiration only occurs when the number of complete backups exceeds the allowed retention. In other words, if retention-full is set to 2, then there must be 3 complete backups before the oldest will be expired. Make sure you always have enough space for retention + 1 backups.</div><div class="section-body"><div class="section2"><a id="section-repository/option-repo-cipher-pass"></a><div class="section2-header"><div class="section2-number">6.1</div><div class="section2-title">Repository Cipher Passphrase Option (<span class="id">--repo-cipher-pass</span>)</div></div><div class="section-body"><div class="section-body-text">Repository cipher passphrase.</div><div class="section-body-text">Passphrase used to encrypt/decrypt files of the repository.</div><pre class="code-block">example: repo1-cipher-pass=zWaf6XtpjIVZC5444yXB+cgFDFl7MxGlgkZSaoPvTGirhPygu4jOKOXf9LO4vjfO</pre></div></div><div class="section2"><a id="section-repository/option-repo-cipher-type"></a><div class="section2-header"><div class="section2-number">6.2</div><div class="section2-title">Repository Cipher Type Option (<span class="id">--repo-cipher-type</span>)</div></div><div class="section-body"><div class="section-body-text">Cipher used to encrypt the repository.</div><div class="section-body-text">The following repository types are supported:<br/>
<ul><li><span class="id">none</span> - The repository is not encrypted</li><li><span class="id">aes-256-cbc</span> - Advanced Encryption Standard with 256 bit key length</li></ul>Note that encryption is always performed client-side even if the repository type (e.g. S3) supports encryption.</div><pre class="code-block">default: none
example: repo1-cipher-type=aes-256-cbc</pre></div></div><div class="section2"><a id="section-repository/option-repo-hardlink"></a><div class="section2-header"><div class="section2-number">6.3</div><div class="section2-title">Repository Hardlink Option (<span class="id">--repo-hardlink</span>)</div></div><div class="section-body"><div class="section-body-text">Hardlink files between backups in the repository.</div><div class="section-body-text">Enable hard-linking of files in differential and incremental backups to their full backups. This gives the appearance that each backup is a full backup at the file-system level. Be careful, though, because modifying files that are hard-linked can affect all the backups in the set.</div><pre class="code-block">default: n
example: repo1-hardlink=y</pre><div class="section-body-text">Deprecated Name: hardlink</div></div></div><div class="section2"><a id="section-repository/option-repo-host"></a><div class="section2-header"><div class="section2-number">6.4</div><div class="section2-title">Repository Host Option (<span class="id">--repo-host</span>)</div></div><div class="section-body"><div class="section-body-text">Repository host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the <span class="postgres">PostgreSQL</span> host and the repository host.<br/>
<br/>
When backing up and archiving to a locally mounted filesystem this setting is not required.</div><pre class="code-block">example: repo1-host=repo1.domain.com</pre><div class="section-body-text">Deprecated Name: backup-host</div></div></div><div class="section2"><a id="section-repository/option-repo-host-cmd"></a><div class="section2-header"><div class="section2-number">6.5</div><div class="section2-title">Repository Host Command Option (<span class="id">--repo-host-cmd</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the repository host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and repository hosts. If not defined, the repository host exe path will be set the same as the local exe path.</div><pre class="code-block">example: repo1-host-cmd=/usr/lib/backrest/bin/pgbackrest</pre><div class="section-body-text">Deprecated Name: backup-cmd</div></div></div><div class="section2"><a id="section-repository/option-repo-host-config"></a><div class="section2-header"><div class="section2-number">6.6</div><div class="section2-title">Repository Host Configuration Option (<span class="id">--repo-host-config</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> repository host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the repository host. This is only required if the repository host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest/pgbackrest.conf
example: repo1-host-config=/conf/pgbackrest/pgbackrest.conf</pre><div class="section-body-text">Deprecated Name: backup-config</div></div></div><div class="section2"><a id="section-repository/option-repo-host-config-include-path"></a><div class="section2-header"><div class="section2-number">6.7</div><div class="section2-title">Repository Host Configuration Include Path Option (<span class="id">--repo-host-config-include-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> repository host configuration include path.</div><div class="section-body-text">Sets the location of the configuration include path on the repository host. This is only required if the repository host configuration include path is in a different location than the local configuration include path.</div><pre class="code-block">default: /etc/pgbackrest/conf.d
example: repo1-host-config-include-path=/conf/pgbackrest/conf.d</pre></div></div><div class="section2"><a id="section-repository/option-repo-host-config-path"></a><div class="section2-header"><div class="section2-number">6.8</div><div class="section2-title">Repository Host Configuration Path Option (<span class="id">--repo-host-config-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> repository host configuration path.</div><div class="section-body-text">Sets the location of the configuration path on the repository host. This is only required if the repository host configuration path is in a different location than the local configuration path.</div><pre class="code-block">default: /etc/pgbackrest
example: repo1-host-config-path=/conf/pgbackrest</pre></div></div><div class="section2"><a id="section-repository/option-repo-host-port"></a><div class="section2-header"><div class="section2-number">6.9</div><div class="section2-title">Repository Host Port Option (<span class="id">--repo-host-port</span>)</div></div><div class="section-body"><div class="section-body-text">Repository host port when <span class="br-setting">repo-host</span> is set.</div><div class="section-body-text">Use this option to specify a non-default port for the repository host protocol. Currently only SSH is supported</div><pre class="code-block">allowed: 0-65535
example: repo1-host-port=25</pre><div class="section-body-text">Deprecated Name: backup-ssh-port</div></div></div><div class="section2"><a id="section-repository/option-repo-host-user"></a><div class="section2-header"><div class="section2-number">6.10</div><div class="section2-title">Repository Host User Option (<span class="id">--repo-host-user</span>)</div></div><div class="section-body"><div class="section-body-text">Repository host user when <span class="br-setting">repo-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the repository host. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">pgbackrest</span>. If <span class="postgres">PostgreSQL</span> runs on the repository host the <span class="id">postgres</span> user can be placed in the <span class="id">pgbackrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: pgbackrest
example: repo1-host-user=repo-user</pre><div class="section-body-text">Deprecated Name: backup-user</div></div></div><div class="section2"><a id="section-repository/option-repo-path"></a><div class="section2-header"><div class="section2-number">6.11</div><div class="section2-title">Repository Path Option (<span class="id">--repo-path</span>)</div></div><div class="section-body"><div class="section-body-text">Path where backups and archive are stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backups and archives WAL segments.<br/>
<br/>
It may be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: repo1-path=/backup/db/backrest</pre></div></div><div class="section2"><a id="section-repository/option-repo-retention-archive"></a><div class="section2-header"><div class="section2-number">6.12</div><div class="section2-title">Archive Retention Option (<span class="id">--repo-retention-archive</span>)</div></div><div class="section-body"><div class="section-body-text">Number of backups worth of continuous WAL to retain.</div><div class="section-body-text"><div class="admonition"><div class="note">NOTE:</div><div class="note-text">WAL segments required to make a backup consistent are always retained until the backup is expired regardless of how this option is configured.</div></div>If this value is not set, then the archive to expire will default to the <span class="br-setting">repo-retention-full</span> (or <span class="br-setting">repo-retention-diff</span>) value corresponding to the <span class="br-setting">repo-retention-archive-type</span> if set to <span class="br-setting">full</span> (or <span class="br-setting">diff</span>). This will ensure that WAL is only expired for backups that are already expired.<br/>
<br/>
This option must be set if <span class="br-setting">repo-retention-archive-type</span> is set to <span class="br-setting">incr</span>. If disk space is at a premium, then this setting, in conjunction with <span class="br-setting">repo-retention-archive-type</span>, can be used to aggressively expire WAL segments. However, doing so negates the ability to perform PITR from the backups with expired WAL and is therefore <b>not</b> recommended.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-archive=2</pre><div class="section-body-text">Deprecated Name: retention-archive</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-archive-type"></a><div class="section2-header"><div class="section2-number">6.13</div><div class="section2-title">Archive Retention Type Option (<span class="id">--repo-retention-archive-type</span>)</div></div><div class="section-body"><div class="section-body-text">Backup type for WAL retention.</div><div class="section-body-text">If set to <span class="br-setting">full</span> <span class="backrest">pgBackRest</span> will keep archive logs for the number of full backups defined by <span class="br-setting">repo-retention-archive</span>. If set to <span class="br-setting">diff</span> (differential) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full and differential backups defined by <span class="br-setting">repo-retention-archive</span>, meaning if the last backup taken was a full backup, it will be counted as a differential for the purpose of repo-retention. If set to <span class="br-setting">incr</span> (incremental) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full, differential, and incremental backups defined by <span class="br-setting">repo-retention-archive</span>. It is recommended that this setting not be changed from the default which will only expire WAL in conjunction with expiring full backups.</div><pre class="code-block">default: full
example: repo1-retention-archive-type=diff</pre><div class="section-body-text">Deprecated Name: retention-archive-type</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-diff"></a><div class="section2-header"><div class="section2-number">6.14</div><div class="section2-title">Differential Retention Option (<span class="id">--repo-retention-diff</span>)</div></div><div class="section-body"><div class="section-body-text">Number of differential backups to retain.</div><div class="section-body-text">When a differential backup expires, all incremental backups associated with the differential backup will also expire. When not defined all differential backups will be kept until the full backups they depend on expire.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-diff=3</pre><div class="section-body-text">Deprecated Name: retention-diff</div></div></div><div class="section2"><a id="section-repository/option-repo-retention-full"></a><div class="section2-header"><div class="section2-number">6.15</div><div class="section2-title">Full Retention Option (<span class="id">--repo-retention-full</span>)</div></div><div class="section-body"><div class="section-body-text">Number of full backups to retain.</div><div class="section-body-text">When a full backup expires, all differential and incremental backups associated with the full backup will also expire. When the option is not defined a warning will be issued. If indefinite retention is desired then set the option to the max value.</div><pre class="code-block">allowed: 1-9999999
example: repo1-retention-full=2</pre><div class="section-body-text">Deprecated Name: retention-full</div></div></div><div class="section2"><a id="section-repository/option-repo-s3-bucket"></a><div class="section2-header"><div class="section2-number">6.16</div><div class="section2-title">S3 Repository Bucket Option (<span class="id">--repo-s3-bucket</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository bucket.</div><div class="section-body-text">S3 bucket used to store the repository.<br/>
<br/>
<span class="backrest">pgBackRest</span> repositories can be stored in the bucket root by setting <span class="br-option">repo-path=/</span> but it is usually best to specify a prefix, such as <span class="path">/repo</span>, so logs and other AWS generated content can also be stored in the bucket.</div><pre class="code-block">example: repo1-s3-bucket=pg-backup</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-ca-file"></a><div class="section2-header"><div class="section2-number">6.17</div><div class="section2-title">S3 SSL CA File Option (<span class="id">--repo-s3-ca-file</span>)</div></div><div class="section-body"><div class="section-body-text">S3 SSL CA File.</div><div class="section-body-text">Use a CA file other than the system default.</div><pre class="code-block">example: repo1-s3-ca-file=/etc/pki/tls/certs/ca-bundle.crt</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-ca-path"></a><div class="section2-header"><div class="section2-number">6.18</div><div class="section2-title">S3 SSL CA Path Option (<span class="id">--repo-s3-ca-path</span>)</div></div><div class="section-body"><div class="section-body-text">S3 SSL CA Path.</div><div class="section-body-text">Use a CA path other than the system default.</div><pre class="code-block">example: repo1-s3-ca-path=/etc/pki/tls/certs</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-endpoint"></a><div class="section2-header"><div class="section2-number">6.19</div><div class="section2-title">S3 Repository Endpoint Option (<span class="id">--repo-s3-endpoint</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository endpoint.</div><div class="section-body-text">The AWS end point should be valid for the selected region.</div><pre class="code-block">example: repo1-s3-endpoint=s3.amazonaws.com</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-host"></a><div class="section2-header"><div class="section2-number">6.20</div><div class="section2-title">S3 Repository Host Option (<span class="id">--repo-s3-host</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository host.</div><div class="section-body-text">Connect to a host other than the end point. This is typically used for testing.</div><pre class="code-block">example: repo1-s3-host=127.0.0.1</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-key"></a><div class="section2-header"><div class="section2-number">6.21</div><div class="section2-title">S3 Repository Access Key Option (<span class="id">--repo-s3-key</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository access key.</div><div class="section-body-text">AWS key used to access this bucket.</div><pre class="code-block">example: repo1-s3-key=AKIAIOSFODNN7EXAMPLE</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-key-secret"></a><div class="section2-header"><div class="section2-number">6.22</div><div class="section2-title">S3 Repository Secret Access Key Option (<span class="id">--repo-s3-key-secret</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository secret access key.</div><div class="section-body-text">AWS secret key used to access this bucket.</div><pre class="code-block">example: repo1-s3-key-secret=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-region"></a><div class="section2-header"><div class="section2-number">6.23</div><div class="section2-title">S3 Repository Region Option (<span class="id">--repo-s3-region</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository region.</div><div class="section-body-text">The AWS region where the bucket was created.</div><pre class="code-block">example: repo1-s3-region=us-east-1</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-token"></a><div class="section2-header"><div class="section2-number">6.24</div><div class="section2-title">S3 Repository Security Token Option (<span class="id">--repo-s3-token</span>)</div></div><div class="section-body"><div class="section-body-text">S3 repository security token.</div><div class="section-body-text">AWS security token used with temporary credentials.</div><pre class="code-block">example: repo1-s3-token=AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22 ...</pre></div></div><div class="section2"><a id="section-repository/option-repo-s3-verify-ssl"></a><div class="section2-header"><div class="section2-number">6.25</div><div class="section2-title">S3 Repository Verify SSL Option (<span class="id">--repo-s3-verify-ssl</span>)</div></div><div class="section-body"><div class="section-body-text">Verify S3 server certificate.</div><div class="section-body-text">Disables verification of the S3 server certificate. This should only be used for testing or other scenarios where a certificate has been self-signed.</div><pre class="code-block">default: y
example: repo1-s3-verify-ssl=n</pre></div></div><div class="section2"><a id="section-repository/option-repo-type"></a><div class="section2-header"><div class="section2-number">6.26</div><div class="section2-title">Repository Type Option (<span class="id">--repo-type</span>)</div></div><div class="section-body"><div class="section-body-text">Type of storage used for the repository.</div><div class="section-body-text">The following repository types are supported:<br/>
<ul><li><span class="id">cifs</span> - Like <span class="id">posix</span>, but disables links and directory fsyncs</li><li><span class="id">posix</span> - Posix-compliant file systems</li><li><span class="id">s3</span> - AWS Simple Storage Service</li></ul></div><pre class="code-block">default: posix
example: repo1-type=cifs</pre></div></div></div></div><div class="section1"><a id="section-restore"></a><div class="section1-header"><div class="section1-number">7</div><div class="section1-title">Restore Options (<span class="id">restore</span>)</div></div><div class="section-intro">The <span class="br-setting">restore</span> section defines settings used for restoring backups.</div><div class="section-body"><div class="section2"><a id="section-restore/option-db-include"></a><div class="section2-header"><div class="section2-number">7.1</div><div class="section2-title">Include Database Option (<span class="id">--db-include</span>)</div></div><div class="section-body"><div class="section-body-text">Restore only specified databases.</div><div class="section-body-text">This feature allows only selected databases to be restored. Databases not specifically included will be restored as sparse, zeroed files to save space but still allow <span class="postgres">PostgreSQL</span> to perform recovery. After recovery the databases that were not included will not be accessible but can be removed with the <span class="id">drop database</span> command. <div class="admonition"><div class="note">NOTE:</div><div class="note-text">built-in databases (<span class="id">template0</span>, <span class="id">template1</span>, and <span class="id">postgres</span>) are always restored.</div></div>The <span class="br-setting">--db-include</span> option can be passed multiple times to specify more than one database to include.</div><pre class="code-block">example: db-include=db_main</pre></div></div><div class="section2"><a id="section-restore/option-link-all"></a><div class="section2-header"><div class="section2-number">7.2</div><div class="section2-title">Link All Option (<span class="id">--link-all</span>)</div></div><div class="section-body"><div class="section-body-text">Restore all symlinks.</div><div class="section-body-text">By default symlinked directories and files are restored as normal directories and files in $PGDATA. This is because it may not be safe to restore symlinks to their original destinations on a system other than where the original backup was performed. This option restores all the symlinks just as they were on the original system where the backup was performed.</div><pre class="code-block">default: n
example: link-all=y</pre></div></div><div class="section2"><a id="section-restore/option-link-map"></a><div class="section2-header"><div class="section2-number">7.3</div><div class="section2-title">Link Map Option (<span class="id">--link-map</span>)</div></div><div class="section-body"><div class="section-body-text">Modify the destination of a symlink.</div><div class="section-body-text">Allows the destination file or path of a symlink to be changed on restore. This is useful for restoring to systems that have a different storage layout than the original system where the backup was generated.</div><pre class="code-block">example: link-map=pg_xlog=/data/xlog</pre></div></div><div class="section2"><a id="section-restore/option-recovery-option"></a><div class="section2-header"><div class="section2-number">7.4</div><div class="section2-title">Recovery Option Option (<span class="id">--recovery-option</span>)</div></div><div class="section-body"><div class="section-body-text">Set an option in <span class="file">recovery.conf</span>.</div><div class="section-body-text">See http://www.postgresql.org/docs/X.X/static/recovery-config.html for details on recovery.conf options (replace X.X with your <span class="postgres">PostgreSQL</span> version). This option can be used multiple times.<div class="admonition"><div class="note">NOTE:</div><div class="note-text">The <span class="br-setting">restore_command</span> option will be automatically generated but can be overridden with this option. Be careful about specifying your own <span class="br-setting">restore_command</span> as <span class="backrest">pgBackRest</span> is designed to handle this for you. Target Recovery options (recovery_target_name, recovery_target_time, etc.) are generated automatically by <span class="backrest">pgBackRest</span> and should not be set with this option.</div></div>Since <span class="backrest">pgBackRest</span> does not start <span class="postgres">PostgreSQL</span> after writing the <span class="file">recovery.conf</span> file, it is always possible to edit/check <span class="file">recovery.conf</span> before manually restarting.</div><pre class="code-block">example: recovery-option=primary_conninfo=db.mydomain.com</pre></div></div><div class="section2"><a id="section-restore/option-tablespace-map"></a><div class="section2-header"><div class="section2-number">7.5</div><div class="section2-title">Tablespace Map Option (<span class="id">--tablespace-map</span>)</div></div><div class="section-body"><div class="section-body-text">Restore a tablespace into the specified directory.</div><div class="section-body-text">Moves a tablespace to a new location during the restore. This is useful when tablespace locations are not the same on a replica, or an upgraded system has different mount points.<br/>
<br/>
Since <span class="postgres">PostgreSQL</span> 9.2 tablespace locations are not stored in pg_tablespace so moving tablespaces can be done with impunity. However, moving a tablespace to the <span class="br-setting">data_directory</span> is not recommended and may cause problems. For more information on moving tablespaces http://www.databasesoup.com/2013/11/moving-tablespaces.html is a good resource.</div><pre class="code-block">example: tablespace-map=ts_01=/db/ts_01</pre></div></div><div class="section2"><a id="section-restore/option-tablespace-map-all"></a><div class="section2-header"><div class="section2-number">7.6</div><div class="section2-title">Map All Tablespaces Option (<span class="id">--tablespace-map-all</span>)</div></div><div class="section-body"><div class="section-body-text">Restore all tablespaces into the specified directory.</div><div class="section-body-text">By default tablespaces are restored into their original locations and while this behavior can be modified by with the <span class="br-setting">tablespace-map</span> open it is sometime preferable to remap all tablespaces to a new directory all at once. This is particularly useful for development or staging systems that may not have the same storage layout as the original system where the backup was generated.<br/>
<br/>
The path specified will be the parent path used to create all the tablespaces in the backup.</div><pre class="code-block">example: tablespace-map-all=/data/tablespace</pre></div></div></div></div><div class="section1"><a id="section-stanza"></a><div class="section1-header"><div class="section1-number">8</div><div class="section1-title">Stanza Options (<span class="id">stanza</span>)</div></div><div class="section-intro">A stanza defines the backup configuration for a specific <span class="postgres">PostgreSQL</span> database cluster. The stanza section must define the database cluster path and host/user if the database cluster is remote. Also, any global configuration sections can be overridden to define stanza-specific settings.<br/>
<br/>
<b>Indexing</b>: All <span class="br-setting">pg-</span> options are indexed to allow for configuring multiple <span class="postgres">PostgreSQL</span> hosts. For example, a single master is configured with the <span class="br-setting">pg1-path</span>, <span class="br-setting">pg1-host</span>, etc. options. If a standby is configured then index the <span class="br-setting">pg-</span> options as <span class="br-setting">pg2-</span> (e.g. pg2-host, pg2-path, etc).</div><div class="section-body"><div class="section2"><a id="section-stanza/option-pg-host"></a><div class="section2-header"><div class="section2-number">8.1</div><div class="section2-title">PostgreSQL Host Option (<span class="id">--pg-host</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the <span class="postgres">PostgreSQL</span> host is different from the repository host.</div><pre class="code-block">example: pg1-host=db.domain.com</pre><div class="section-body-text">Deprecated Name: db-host</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-cmd"></a><div class="section2-header"><div class="section2-number">8.2</div><div class="section2-title">PostgreSQL Host Command Option (<span class="id">--pg-host-cmd</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the <span class="postgres">PostgreSQL</span> host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and <span class="postgres">PostgreSQL</span> hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">example: pg1-host-cmd=/usr/lib/backrest/bin/pgbackrest</pre><div class="section-body-text">Deprecated Name: db-cmd</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-config"></a><div class="section2-header"><div class="section2-number">8.3</div><div class="section2-title">PostgreSQL Host Configuration Option (<span class="id">--pg-host-config</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the <span class="postgres">PostgreSQL</span> host. This is only required if the <span class="postgres">PostgreSQL</span> host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest/pgbackrest.conf
example: pg1-host-config=/conf/pgbackrest/pgbackrest.conf</pre><div class="section-body-text">Deprecated Name: db-config</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-config-include-path"></a><div class="section2-header"><div class="section2-number">8.4</div><div class="section2-title">PostgreSQL Host Configuration Include Path Option (<span class="id">--pg-host-config-include-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration include path.</div><div class="section-body-text">Sets the location of the configuration include path on the <span class="postgres">PostgreSQL</span> host. This is only required if the <span class="postgres">PostgreSQL</span> host configuration include path is in a different location than the local configuration include path.</div><pre class="code-block">default: /etc/pgbackrest/conf.d
example: pg1-host-config-include-path=/conf/pgbackrest/conf.d</pre></div></div><div class="section2"><a id="section-stanza/option-pg-host-config-path"></a><div class="section2-header"><div class="section2-number">8.5</div><div class="section2-title">PostgreSQL Host Configuration Path Option (<span class="id">--pg-host-config-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration path.</div><div class="section-body-text">Sets the location of the configuration path on the <span class="postgres">PostgreSQL</span> host. This is only required if the <span class="postgres">PostgreSQL</span> host configuration path is in a different location than the local configuration path.</div><pre class="code-block">default: /etc/pgbackrest
example: pg1-host-config-path=/conf/pgbackrest</pre></div></div><div class="section2"><a id="section-stanza/option-pg-host-port"></a><div class="section2-header"><div class="section2-number">8.6</div><div class="section2-title">PostgreSQL Host Port Option (<span class="id">--pg-host-port</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> host port when <span class="br-setting">pg-host</span> is set.</div><div class="section-body-text">Use this option to specify a non-default port for the <span class="postgres">PostgreSQL</span> host protocol. Currently only SSH is supported</div><pre class="code-block">allowed: 0-65535
example: pg1-host-port=25</pre><div class="section-body-text">Deprecated Name: db-ssh-port</div></div></div><div class="section2"><a id="section-stanza/option-pg-host-user"></a><div class="section2-header"><div class="section2-number">8.7</div><div class="section2-title">PostgreSQL Host User Option (<span class="id">--pg-host-user</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> host logon user when <span class="br-setting">pg-host</span> is set.</div><div class="section-body-text">This user will also own the remote <span class="backrest">pgBackRest</span> process and will initiate connections to <span class="postgres">PostgreSQL</span>. For this to work correctly the user should be the <span class="postgres">PostgreSQL</span> database cluster owner which is generally <span class="id">postgres</span>, the default.</div><pre class="code-block">default: postgres
example: pg1-host-user=db_owner</pre><div class="section-body-text">Deprecated Name: db-user</div></div></div><div class="section2"><a id="section-stanza/option-pg-path"></a><div class="section2-header"><div class="section2-number">8.8</div><div class="section2-title">PostgreSQL Path Option (<span class="id">--pg-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or <span class="postgres">PostgreSQL</span> it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">pg-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: pg1-path=/data/db</pre><div class="section-body-text">Deprecated Name: db-path</div></div></div><div class="section2"><a id="section-stanza/option-pg-port"></a><div class="section2-header"><div class="section2-number">8.9</div><div class="section2-title">PostgreSQL Port Option (<span class="id">--pg-port</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> port.</div><div class="section-body-text">Port that <span class="postgres">PostgreSQL</span> is running on. This usually does not need to be specified as most <span class="postgres">PostgreSQL</span> clusters run on the default port.</div><pre class="code-block">default: 5432
allowed: 0-65535
example: pg1-port=6543</pre><div class="section-body-text">Deprecated Name: db-port</div></div></div><div class="section2"><a id="section-stanza/option-pg-socket-path"></a><div class="section2-header"><div class="section2-number">8.10</div><div class="section2-title">PostgreSQL Socket Path Option (<span class="id">--pg-socket-path</span>)</div></div><div class="section-body"><div class="section-body-text"><span class="postgres">PostgreSQL</span> unix socket path.</div><div class="section-body-text">The unix socket directory that was specified when <span class="postgres">PostgreSQL</span> was started. <span class="backrest">pgBackRest</span> will automatically look in the standard location for your OS so there is usually no need to specify this setting unless the socket directory was explicitly modified with the <span class="br-setting">unix_socket_directory</span> setting in <span class="file">postgresql.conf</span>.</div><pre class="code-block">allowed: 0-65535
example: pg1-socket-path=/var/run/postgresql</pre><div class="section-body-text">Deprecated Name: db-socket-path</div></div></div></div></div></div><div class="page-footer">Copyright &copy; 2015-2019, The PostgreSQL Global Development Group, <a href="https://github.com/pgbackrest/pgbackrest/blob/master/LICENSE">MIT License</a>.  Updated May 24, 2019</div></body></html>