<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>pgBackRest Command Reference</title><link rel="stylesheet" href="default.css" type="text/css"></link><meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta><meta property="og:site_name" content="pgBackRest - Reliable PostgreSQL Backup & Restore"></meta><meta property="og:title" content="pgBackRest Command Reference"></meta><meta property="og:type" content="website"></meta><link rel="icon" href="favicon.png" type="image/png"></link><meta property="og:image:type" content="image/png"></meta><meta property="og:image" content="http://www.pgbackrest.org/logo.png"></meta><meta name="description" content="The pgBackRest Command Reference details all commands and options."></meta><meta property="og:description" content="The pgBackRest Command Reference details all commands and options."></meta><body><div class="page-header"><div class="page-header-title">pgBackRest Command Reference</div></div><div class="page-menu"><div class="menu-body"><div class="menu"><a class="menu-link" href="index.html">Home</a></div><div class="menu"><a class="menu-link" href="user-guide.html">User Guide</a></div><div class="menu"><a class="menu-link" href="configuration.html">Configuration</a></div></div></div><div class="page-toc"><div class="page-toc-title">Table of Contents</div><div class="page-toc-body"><div class="section1-toc"><div class="section1-toc-title"><a href="#introduction">Introduction</a></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-archive-get">Archive Get Command (<span class="id">archive-get</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-get/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-get/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-compress">Compress Option (<span class="id">--compress</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-get/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-get/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-get/category-stanza/option-db-path">Database Path Option (<span class="id">--db-path</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-archive-push">Archive Push Command (<span class="id">archive-push</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-push/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-archive-async">Asynchronous Archiving Option (<span class="id">--archive-async</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-archive-max-mb">Maximum Archive MB Option (<span class="id">--archive-max-mb</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-push/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-compress">Compress Option (<span class="id">--compress</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-spool-path">Spool Path Option (<span class="id">--spool-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-push/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-archive-push/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-archive-push/category-stanza/option-db-path">Database Path Option (<span class="id">--db-path</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-backup">Backup Command (<span class="id">backup</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-backup/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-archive-check">Check Archive Option (<span class="id">--archive-check</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-archive-copy">Copy Archive Option (<span class="id">--archive-copy</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-backup-standby">Backup from Standby Option (<span class="id">--backup-standby</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-force">Force Option (<span class="id">--force</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-hardlink">Hardlink Option (<span class="id">--hardlink</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-manifest-save-threshold">Manifest Save Threshold Option (<span class="id">--manifest-save-threshold</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-resume">Resume Option (<span class="id">--resume</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-start-fast">Start Fast Option (<span class="id">--start-fast</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-stop-auto">Stop Auto Option (<span class="id">--stop-auto</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-command/option-type">Type Option (<span class="id">--type</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-backup/category-expire">Expire Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-expire/option-retention-archive">Archive Retention Option (<span class="id">--retention-archive</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-expire/option-retention-archive-type">Archive Retention Type Option (<span class="id">--retention-archive-type</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-expire/option-retention-diff">Differential Retention Option (<span class="id">--retention-diff</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-expire/option-retention-full">Full Retention Option (<span class="id">--retention-full</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-backup/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-archive-timeout">Archive Timeout Option (<span class="id">--archive-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-compress">Compress Option (<span class="id">--compress</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-db-timeout">Database Timeout Option (<span class="id">--db-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-online">Online Option (<span class="id">--online</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-process-max">Process Maximum Option (<span class="id">--process-max</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-backup/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-backup/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-cmd">Database Host Command Option (<span class="id">--db-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-config">Database Host Configuration Option (<span class="id">--db-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-host">Database Host Option (<span class="id">--db-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-path">Database Path Option (<span class="id">--db-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-port">Database Port Option (<span class="id">--db-port</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-socket-path">Database Socket Path Option (<span class="id">--db-socket-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-backup/category-stanza/option-db-user">Database User Option (<span class="id">--db-user</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-check">Check Command (<span class="id">check</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-check/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-archive-check">Check Archive Option (<span class="id">--archive-check</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-backup-standby">Backup from Standby Option (<span class="id">--backup-standby</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-check/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-archive-timeout">Archive Timeout Option (<span class="id">--archive-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-db-timeout">Database Timeout Option (<span class="id">--db-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-online">Online Option (<span class="id">--online</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-check/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-check/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-cmd">Database Host Command Option (<span class="id">--db-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-config">Database Host Configuration Option (<span class="id">--db-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-host">Database Host Option (<span class="id">--db-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-path">Database Path Option (<span class="id">--db-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-port">Database Port Option (<span class="id">--db-port</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-socket-path">Database Socket Path Option (<span class="id">--db-socket-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-check/category-stanza/option-db-user">Database User Option (<span class="id">--db-user</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-expire">Expire Command (<span class="id">expire</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-expire/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-command/option-retention-archive">Archive Retention Option (<span class="id">--retention-archive</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-command/option-retention-archive-type">Archive Retention Type Option (<span class="id">--retention-archive-type</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-command/option-retention-diff">Differential Retention Option (<span class="id">--retention-diff</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-command/option-retention-full">Full Retention Option (<span class="id">--retention-full</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-expire/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-expire/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-expire/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-stanza/option-db-cmd">Database Host Command Option (<span class="id">--db-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-stanza/option-db-config">Database Host Configuration Option (<span class="id">--db-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-expire/category-stanza/option-db-host">Database Host Option (<span class="id">--db-host</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-help">Help Command (<span class="id">help</span>)</a></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-info">Info Command (<span class="id">info</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-info/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-command/option-output">Output Option (<span class="id">--output</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-info/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-info/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-info/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-restore">Restore Command (<span class="id">restore</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-restore/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-db-include">Include Database Option (<span class="id">--db-include</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-delta">Delta Option (<span class="id">--delta</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-force">Force Option (<span class="id">--force</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-link-all">Link All Option (<span class="id">--link-all</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-link-map">Link Map Option (<span class="id">--link-map</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-lock">Lock Option (<span class="id">--lock</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-recovery-option">Recovery Option Option (<span class="id">--recovery-option</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-set">Set Option (<span class="id">--set</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-tablespace-map">Tablespace Map Option (<span class="id">--tablespace-map</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-tablespace-map-all">Map All Tablespaces Option (<span class="id">--tablespace-map-all</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-target">Target Option (<span class="id">--target</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-target-action">Target Action Option (<span class="id">--target-action</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-target-exclusive">Target Exclusive Option (<span class="id">--target-exclusive</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-target-timeline">Target Timeline Option (<span class="id">--target-timeline</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-command/option-type">Type Option (<span class="id">--type</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-restore/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-buffer-size">Buffer Size Option (<span class="id">--buffer-size</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-compress">Compress Option (<span class="id">--compress</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-compress-level">Compress Level Option (<span class="id">--compress-level</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-compress-level-network">Network Compress Level Option (<span class="id">--compress-level-network</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-neutral-umask">Neutral Umask Option (<span class="id">--neutral-umask</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-process-max">Process Maximum Option (<span class="id">--process-max</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-protocol-timeout">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-restore/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-restore/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-restore/category-stanza/option-db-path">Database Path Option (<span class="id">--db-path</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-start">Start Command (<span class="id">start</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-start/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-start/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-start/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-start/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-stanza/option-db-cmd">Database Host Command Option (<span class="id">--db-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-stanza/option-db-config">Database Host Configuration Option (<span class="id">--db-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-start/category-stanza/option-db-host">Database Host Option (<span class="id">--db-host</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-stop">Stop Command (<span class="id">stop</span>)</a></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-stop/category-command">Command Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-command/option-backup-cmd">Backup Host Command Option (<span class="id">--backup-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-command/option-backup-config">Backup Host Configuration Option (<span class="id">--backup-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-command/option-backup-host">Backup Host Option (<span class="id">--backup-host</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-command/option-backup-user">Backup User Option (<span class="id">--backup-user</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-command/option-force">Force Option (<span class="id">--force</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-stop/category-general">General Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-general/option-config">Config Option (<span class="id">--config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-general/option-lock-path">Lock Path Option (<span class="id">--lock-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-general/option-log-path">Log Path Option (<span class="id">--log-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-general/option-repo-path">Repository Path Option (<span class="id">--repo-path</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-general/option-stanza">Stanza Option (<span class="id">--stanza</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-stop/category-log">Log Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-log/option-log-level-console">Console Log Level Option (<span class="id">--log-level-console</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-log/option-log-level-file">File Log Level Option (<span class="id">--log-level-file</span>)</a></div></div></div><div class="section2-toc"><div class="section2-toc-title"><a href="#command-stop/category-stanza">Stanza Options</a></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-stanza/option-db-cmd">Database Host Command Option (<span class="id">--db-cmd</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-stanza/option-db-config">Database Host Configuration Option (<span class="id">--db-config</span>)</a></div></div><div class="section3-toc"><div class="section3-toc-title"><a href="#command-stop/category-stanza/option-db-host">Database Host Option (<span class="id">--db-host</span>)</a></div></div></div></div><div class="section1-toc"><div class="section1-toc-title"><a href="#command-version">Version Command (<span class="id">version</span>)</a></div></div></div></div><div class="page-body"><div class="section1"><a id="introduction"></a><div class="section1-title">Introduction</div><div class="section-intro">Commands are used to execute the various <span class="backrest">pgBackRest</span> functions. Here the command options are listed exhaustively, that is, each option applicable to a command is listed with that command even if it applies to one or more other commands. This includes all the options that may also configured in <span class="file">pgbackrest.conf</span>.</div><div class="section-body"></div></div><div class="section1"><a id="command-archive-get"></a><div class="section1-title">Archive Get Command (<span class="id">archive-get</span>)</div><div class="section-intro">WAL segments are required for restoring a <span class="postgres">PostgreSQL</span> cluster or maintaining a replica.</div><div class="section-body"><div class="section2"><a id="command-archive-get/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-archive-get/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-archive-get/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-archive-get/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-archive-get/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div></div></div><div class="section2"><a id="command-archive-get/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-archive-get/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-compress"></a><div class="section3-title">Compress Option (<span class="id">--compress</span>)</div><div class="section-body"><div class="section-body-text">Use gzip file compression.</div><div class="section-body-text">Backup files are compatible with command-line gzip tools.</div><pre class="code-block">default: y
example: --no-compress</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-neutral-umask"></a><div class="section3-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: --no-neutral-umask</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-archive-get/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-archive-get/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-archive-get/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-archive-get/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-archive-get/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-archive-get/category-stanza/option-db-path"></a><div class="section3-title">Database Path Option (<span class="id">--db-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or the database cluster it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">db-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: --db-path=/data/db</pre></div></div></div></div></div></div><div class="section1"><a id="command-archive-push"></a><div class="section1-title">Archive Push Command (<span class="id">archive-push</span>)</div><div class="section-intro">The WAL segment may be pushed immediately to the archive or stored locally depending on the value of <span class="br-setting">archive-async</span></div><div class="section-body"><div class="section2"><a id="command-archive-push/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-archive-push/category-command/option-archive-async"></a><div class="section3-title">Asynchronous Archiving Option (<span class="id">--archive-async</span>)</div><div class="section-body"><div class="section-body-text">Archive WAL segments asynchronously.</div><div class="section-body-text">WAL segments will be copied to the local repo, then a process will be forked to compress the segment and transfer it to the remote repo if configured. Control will be returned to <span class="postgres">PostgreSQL</span> as soon as the WAL segment is copied locally.</div><pre class="code-block">default: n
example: --archive-async</pre></div></div><div class="section3"><a id="command-archive-push/category-command/option-archive-max-mb"></a><div class="section3-title">Maximum Archive MB Option (<span class="id">--archive-max-mb</span>)</div><div class="section-body"><div class="section-body-text">Limit size of the local asynchronous archive queue when <span class="br-setting">archive-async=y</span>.</div><div class="section-body-text">After the limit is reached, the following will happen:<br/>
<ol><li><span class="backrest">pgBackRest</span> will notify Postgres that the archive was successfully backed up, then DROP IT.</li><li>An error will be logged to the console and also to the Postgres log.</li><li>A stop file will be written in the lock directory and no more archive files will be backed up until it is removed.</li></ol>If this occurs then the archive log stream will be interrupted and PITR will not be possible past that point. A new backup will be required to regain full restore capability.<br/>
<br/>
The purpose of this feature is to prevent the log volume from filling up at which point Postgres will stop completely. Better to lose the backup than have <span class="postgres">PostgreSQL</span> go down.<br/>
<br/>
To start normal archiving again you'll need to remove the stop file which will be located at <span class="file">${repo-path}/lock/${stanza}-archive.stop</span> where <span class="id">${repo-path}</span> is the path set in the <span class="br-setting">general</span> section, and <span class="id">${stanza}</span> is the backup stanza.</div><pre class="code-block">example: --archive-max-mb=1024</pre></div></div><div class="section3"><a id="command-archive-push/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-archive-push/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-archive-push/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-archive-push/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div></div></div><div class="section2"><a id="command-archive-push/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-archive-push/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-compress"></a><div class="section3-title">Compress Option (<span class="id">--compress</span>)</div><div class="section-body"><div class="section-body-text">Use gzip file compression.</div><div class="section-body-text">Backup files are compatible with command-line gzip tools.</div><pre class="code-block">default: y
example: --no-compress</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-neutral-umask"></a><div class="section3-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: --no-neutral-umask</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-spool-path"></a><div class="section3-title">Spool Path Option (<span class="id">--spool-path</span>)</div><div class="section-body"><div class="section-body-text">Path where WAL segments are spooled during async archiving.</div><div class="section-body-text">When asynchronous archiving is enabled <span class="backrest">pgBackRest</span> needs a local directory to store WAL segments before they are compressed and moved to the repository. Depending on the volume of WAL generated this directory could become very large so be sure to plan accordingly.<br/>
<br/>
The <span class="br-setting">max-archive-mb</span> option can be used to limit the amount of WAL that will be spooled locally.</div><pre class="code-block">default: /var/spool/pgbackrest
example: --spool-path=/backup/db/spool</pre></div></div><div class="section3"><a id="command-archive-push/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-archive-push/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-archive-push/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-archive-push/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-archive-push/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-archive-push/category-stanza/option-db-path"></a><div class="section3-title">Database Path Option (<span class="id">--db-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or the database cluster it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">db-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: --db-path=/data/db</pre></div></div></div></div></div></div><div class="section1"><a id="command-backup"></a><div class="section1-title">Backup Command (<span class="id">backup</span>)</div><div class="section-intro"><span class="backrest">pgBackRest</span> does not have a built-in scheduler so it's best to run it from cron or some other scheduling mechanism.</div><div class="section-body"><div class="section2"><a id="command-backup/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-backup/category-command/option-archive-check"></a><div class="section3-title">Check Archive Option (<span class="id">--archive-check</span>)</div><div class="section-body"><div class="section-body-text">Check that WAL segments are present in the archive before backup completes.</div><div class="section-body-text">Checks that all WAL segments required to make the backup consistent are present in the WAL archive. It's a good idea to leave this as the default unless you are using another method for archiving.</div><pre class="code-block">default: y
example: --no-archive-check</pre></div></div><div class="section3"><a id="command-backup/category-command/option-archive-copy"></a><div class="section3-title">Copy Archive Option (<span class="id">--archive-copy</span>)</div><div class="section-body"><div class="section-body-text">Copy WAL segments needed for consistency to the backup.</div><div class="section-body-text">This slightly paranoid option protects against corruption or premature expiration in the WAL segment archive by storing the WAL segments directly in the backup. PITR won't be possible without the WAL segment archive and this option also consumes more space.<br/>
<br/>
Even though WAL segments will be restored with the backup, <span class="postgres">PostgreSQL</span> will ignore them if a <span class="file">recovery.conf</span> file exists and instead use <span class="br-setting">archive_command</span> to fetch WAL segments. Specifying <span class="br-setting">type=none</span> when restoring will not create <span class="file">recovery.conf</span> and force <span class="postgres">PostgreSQL</span> to use the WAL segments in pg_xlog. This will get the database cluster to a consistent state.</div><pre class="code-block">default: n
example: --archive-copy</pre></div></div><div class="section3"><a id="command-backup/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-backup/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-backup/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-backup/category-command/option-backup-standby"></a><div class="section3-title">Backup from Standby Option (<span class="id">--backup-standby</span>)</div><div class="section-body"><div class="section-body-text">Backup from the standby cluster.</div><div class="section-body-text">Enable backup from standby to reduce load on the master cluster. This option requires that both the <span class="host">master</span> and <span class="host">standby</span> hosts be configured.</div><pre class="code-block">default: n
example: --backup-standby</pre></div></div><div class="section3"><a id="command-backup/category-command/option-force"></a><div class="section3-title">Force Option (<span class="id">--force</span>)</div><div class="section-body"><div class="section-body-text">Force an offline backup.</div><div class="section-body-text">When used with <span class="br-option">--no-start-stop</span> a backup will be run even if <span class="backrest">pgBackRest</span> thinks that <span class="postgres">PostgreSQL</span> is running. <b>This option should be used with extreme care as it will likely result in a bad backup.</b><br/>
<br/>
There are some scenarios where a backup might still be desirable under these conditions. For example, if a server crashes and the database cluster volume can only be mounted read-only, it would be a good idea to take a backup even if <span class="file">postmaster.pid</span> is present. In this case it would be better to revert to the prior backup and replay WAL, but possibly there is a very important transaction in a WAL segment that did not get archived.</div><pre class="code-block">default: n
example: --force</pre></div></div><div class="section3"><a id="command-backup/category-command/option-hardlink"></a><div class="section3-title">Hardlink Option (<span class="id">--hardlink</span>)</div><div class="section-body"><div class="section-body-text">Hardlink files between backups.</div><div class="section-body-text">Enable hard-linking of files in differential and incremental backups to their full backups. This gives the appearance that each backup is a full backup. Be careful, though, because modifying files that are hard-linked can affect all the backups in the set.</div><pre class="code-block">default: n
example: --hardlink</pre></div></div><div class="section3"><a id="command-backup/category-command/option-manifest-save-threshold"></a><div class="section3-title">Manifest Save Threshold Option (<span class="id">--manifest-save-threshold</span>)</div><div class="section-body"><div class="section-body-text">Manifest save threshold during backup.</div><div class="section-body-text">Defines how often the manifest will be saved during a backup (in bytes). Saving the manifest is important because it stores the checksums and allows the resume function to work efficiently. The actual threshold used is 1% of the backup size or <span class="br-setting">manifest-save-threshold</span>, whichever is greater.</div><pre class="code-block">default: 1073741824
example: --manifest-save-threshold=5368709120</pre></div></div><div class="section3"><a id="command-backup/category-command/option-resume"></a><div class="section3-title">Resume Option (<span class="id">--resume</span>)</div><div class="section-body"><div class="section-body-text">Allow resume of failed backup.</div><div class="section-body-text">Defines whether the resume feature is enabled. Resume can greatly reduce the amount of time required to run a backup after a previous backup of the same type has failed. It adds complexity, however, so it may be desirable to disable in environments that do not require the feature.</div><pre class="code-block">default: y
example: --no-resume</pre></div></div><div class="section3"><a id="command-backup/category-command/option-start-fast"></a><div class="section3-title">Start Fast Option (<span class="id">--start-fast</span>)</div><div class="section-body"><div class="section-body-text">Force a checkpoint to start backup quickly.</div><div class="section-body-text">Forces a checkpoint (by passing <span class="id">y</span> to the <span class="id">fast</span> parameter of <span class="id">pg_start_backup()</span>) so the backup begins immediately. Otherwise the backup will start after the next regular checkpoint.<br/>
<br/>
This feature only works in <span class="postgres">PostgreSQL</span> >= <span class="id">8.4</span>.</div><pre class="code-block">default: n
example: --start-fast</pre></div></div><div class="section3"><a id="command-backup/category-command/option-stop-auto"></a><div class="section3-title">Stop Auto Option (<span class="id">--stop-auto</span>)</div><div class="section-body"><div class="section-body-text">Stop prior failed backup on new backup.</div><div class="section-body-text">This will only be done if an exclusive advisory lock can be acquired to demonstrate that the prior failed backup process has really stopped.<br/>
<br/>
This feature relies on pg_is_in_backup() so only works on <span class="postgres">PostgreSQL</span> >= <span class="id">9.3</span>.<br/>
<br/>
The setting is disabled by default because it assumes that <span class="backrest">pgBackRest</span> is the only process doing exclusive online backups. It depends on an advisory lock that only <span class="backrest">pgBackRest</span> sets so it may abort other processes that do exclusive online backups. Note that <span class="cmd">base_backup</span> and <span class="cmd">pg_dump</span> are safe to use with this setting because they do not call <span class="id">pg_start_backup()</span> so are not exclusive.</div><pre class="code-block">default: n
example: --stop-auto</pre></div></div><div class="section3"><a id="command-backup/category-command/option-type"></a><div class="section3-title">Type Option (<span class="id">--type</span>)</div><div class="section-body"><div class="section-body-text">Backup type.</div><div class="section-body-text">The following backup types are supported:<br/>
<ul><li><span class="id">full</span> - all database cluster files will be copied and there will be no dependencies on previous backups.</li><li><span class="id">incr</span> - incremental from the last successful backup.</li><li><span class="id">diff</span> - like an incremental backup but always based on the last full backup.</li></ul></div><pre class="code-block">default: incr
example: --type=full</pre></div></div></div></div><div class="section2"><a id="command-backup/category-expire"></a><div class="section2-title">Expire Options</div><div class="section-body"><div class="section3"><a id="command-backup/category-expire/option-retention-archive"></a><div class="section3-title">Archive Retention Option (<span class="id">--retention-archive</span>)</div><div class="section-body"><div class="section-body-text">Number of backups worth of continuous WAL to retain.</div><div class="section-body-text">Note that the WAL segments required to make a backup consistent are always retained until the backup is expired regardless of how this option is configured.<br/>
<br/>
If this value is not set, then the archive to expire will default to the <span class="br-setting">retention-full</span> (or <span class="br-setting">retention-diff</span>) value corresponding to the <span class="br-setting">retention-archive-type</span> if set to <span class="br-setting">full</span> (or <span class="br-setting">diff</span>). This will ensure that WAL is only expired for backups that are already expired.<br/>
<br/>
This option must be set if <span class="br-setting">retention-archive-type</span> is set to <span class="br-setting">incr</span>. If disk space is at a premium, then this setting, in conjunction with <span class="br-setting">retention-archive-type</span>, can be used to aggressively expire WAL segments. However, doing so negates the ability to perform PITR from the backups with expired WAL and is therefore <b>not</b> recommended.</div><pre class="code-block">allowed: 1-999999999
example: --retention-archive=2</pre></div></div><div class="section3"><a id="command-backup/category-expire/option-retention-archive-type"></a><div class="section3-title">Archive Retention Type Option (<span class="id">--retention-archive-type</span>)</div><div class="section-body"><div class="section-body-text">Backup type for WAL retention.</div><div class="section-body-text">If set to <span class="br-setting">full</span> <span class="backrest">pgBackRest</span> will keep archive logs for the number of full backups defined by <span class="br-setting">retention-archive</span>. If set to <span class="br-setting">diff</span> (differential) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full and differential backups defined by <span class="br-setting">retention-archive</span>, meaning if the last backup taken was a full backup, it will be counted as a differential for the purpose of retention. If set to <span class="br-setting">incr</span> (incremental) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full, differential, and incremental backups defined by <span class="br-setting">retention-archive</span>. It is recommended that this setting not be changed from the default which will only expire WAL in conjunction with expiring full backups.</div><pre class="code-block">default: full
example: --retention-archive-type=diff</pre></div></div><div class="section3"><a id="command-backup/category-expire/option-retention-diff"></a><div class="section3-title">Differential Retention Option (<span class="id">--retention-diff</span>)</div><div class="section-body"><div class="section-body-text">Number of differential backups to retain.</div><div class="section-body-text">When a differential backup expires, all incremental backups associated with the differential backup will also expire. When not defined all differential backups will be kept until the full backups they depend on expire.</div><pre class="code-block">allowed: 1-999999999
example: --retention-diff=3</pre></div></div><div class="section3"><a id="command-backup/category-expire/option-retention-full"></a><div class="section3-title">Full Retention Option (<span class="id">--retention-full</span>)</div><div class="section-body"><div class="section-body-text">Number of full backups to retain.</div><div class="section-body-text">When a full backup expires, all differential and incremental backups associated with the full backup will also expire. When the option is not defined a warning will be issued. If indefinite retention is desired then set the option to the max value.</div><pre class="code-block">allowed: 1-999999999
example: --retention-full=2</pre></div></div></div></div><div class="section2"><a id="command-backup/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-backup/category-general/option-archive-timeout"></a><div class="section3-title">Archive Timeout Option (<span class="id">--archive-timeout</span>)</div><div class="section-body"><div class="section-body-text">Archive timeout.</div><div class="section-body-text">Set maximum time, in seconds, to wait for WAL segments to reach the archive. The timeout applies to the <span class="cmd">check</span> command and to the <span class="cmd">backup</span> command when waiting for WAL segments required to make the backup consistent to be archived.</div><pre class="code-block">default: 60
allowed: 0.1-86400
example: --archive-timeout=30</pre></div></div><div class="section3"><a id="command-backup/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-backup/category-general/option-compress"></a><div class="section3-title">Compress Option (<span class="id">--compress</span>)</div><div class="section-body"><div class="section-body-text">Use gzip file compression.</div><div class="section-body-text">Backup files are compatible with command-line gzip tools.</div><pre class="code-block">default: y
example: --no-compress</pre></div></div><div class="section3"><a id="command-backup/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-backup/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-backup/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-backup/category-general/option-db-timeout"></a><div class="section3-title">Database Timeout Option (<span class="id">--db-timeout</span>)</div><div class="section-body"><div class="section-body-text">Database query timeout.</div><div class="section-body-text">Sets the timeout, in seconds, for queries against the database. This includes the <span class="id">pg_start_backup()</span> and <span class="id">pg_stop_backup()</span> functions which can each take a substantial amount of time. Because of this the timeout should be kept high unless you know that these functions will return quickly (i.e. if you have set <span class="br-setting">startfast=y</span> and you know that the database cluster will not generate many WAL segments during the backup).</div><pre class="code-block">default: 1800
allowed: 0.1-604800
example: --db-timeout=600</pre></div></div><div class="section3"><a id="command-backup/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-backup/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-backup/category-general/option-neutral-umask"></a><div class="section3-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: --no-neutral-umask</pre></div></div><div class="section3"><a id="command-backup/category-general/option-online"></a><div class="section3-title">Online Option (<span class="id">--online</span>)</div><div class="section-body"><div class="section-body-text">Perform an online backup.</div><div class="section-body-text">Specifying --no-online prevents <span class="backrest">pgBackRest</span> from running <span class="id">pg_start_backup()</span> and <span class="id">pg_stop_backup()</span> on the database cluster. In order for this to work <span class="postgres">PostgreSQL</span> should be shut down and <span class="backrest">pgBackRest</span> will generate an error if it is not.<br/>
<br/>
The purpose of this option is to allow offline backups. The <span class="path">pg_xlog</span> directory is copied as-is and <span class="br-setting">archive-check</span> is automatically disabled for the backup.</div><pre class="code-block">default: y
example: --no-online</pre></div></div><div class="section3"><a id="command-backup/category-general/option-process-max"></a><div class="section3-title">Process Maximum Option (<span class="id">--process-max</span>)</div><div class="section-body"><div class="section-body-text">Max processes to use for compress/transfer.</div><div class="section-body-text">Each process will perform compression and transfer to make the command run faster, but don't set <span class="br-setting">process-max</span> so high that it impacts database performance.</div><pre class="code-block">default: 1
allowed: 1-96
example: --process-max=4</pre></div></div><div class="section3"><a id="command-backup/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-backup/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-backup/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-backup/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-backup/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-backup/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-backup/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-backup/category-stanza/option-db-cmd"></a><div class="section3-title">Database Host Command Option (<span class="id">--db-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the database host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and database hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --db-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-config"></a><div class="section3-title">Database Host Configuration Option (<span class="id">--db-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the database host. This is only required if the database host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --db-config=/etc/pgbackrest_db.conf</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-host"></a><div class="section3-title">Database Host Option (<span class="id">--db-host</span>)</div><div class="section-body"><div class="section-body-text">Cluster host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the database cluster host is different from the backup host.</div><pre class="code-block">example: --db-host=db.domain.com</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-path"></a><div class="section3-title">Database Path Option (<span class="id">--db-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or the database cluster it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">db-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: --db-path=/data/db</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-port"></a><div class="section3-title">Database Port Option (<span class="id">--db-port</span>)</div><div class="section-body"><div class="section-body-text">Cluster port.</div><div class="section-body-text">Port that <span class="postgres">PostgreSQL</span> is running on. This usually does not need to be specified as most database clusters run on the default port.</div><pre class="code-block">default: 5432
example: --db-port=6543</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-socket-path"></a><div class="section3-title">Database Socket Path Option (<span class="id">--db-socket-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster unix socket path.</div><div class="section-body-text">The unix socket directory that was specified when <span class="postgres">PostgreSQL</span> was started. <span class="backrest">pgBackRest</span> will automatically look in the standard location for your OS so there usually no need to specify this setting unless the socket directory was explicitly modified with the <span class="br-setting">unix_socket_directory</span> setting in <span class="file">postgressql.conf</span>.</div><pre class="code-block">example: --db-socket-path=/var/run/postgresql</pre></div></div><div class="section3"><a id="command-backup/category-stanza/option-db-user"></a><div class="section3-title">Database User Option (<span class="id">--db-user</span>)</div><div class="section-body"><div class="section-body-text">Cluster host logon user when <span class="br-setting">db-host</span> is set.</div><div class="section-body-text">This user will also own the remote <span class="backrest">pgBackRest</span> process and will initiate connections to <span class="postgres">PostgreSQL</span>. For this to work correctly the user should be the <span class="postgres">PostgreSQL</span> database cluster owner which is generally <span class="id">postgres</span>, the default.</div><pre class="code-block">default: postgres
example: --db-user=db_owner</pre></div></div></div></div></div></div><div class="section1"><a id="command-check"></a><div class="section1-title">Check Command (<span class="id">check</span>)</div><div class="section-intro">The <span class="cmd">check</span> command validates that <span class="backrest">pgBackRest</span> and the <span class="pg-setting">archive_command</span> setting are configured correctly for archiving and backups. It detects misconfigurations, particularly in archiving, that result in incomplete backups because required WAL segments did not reach the archive. The command can be run on the database or the backup host.<br/>
<br/>
Note that <span class="id">pg_create_restore_point('pgBackRest Archive Check')</span> and <span class="id">pg_switch_xlog()</span> are called to force <span class="postgres">PostgreSQL</span> to archive a WAL segment. Restore points are only supported in <span class="postgres">PostgreSQL</span> >= 9.1 so for older versions the <span class="cmd">check</span> command may fail if there has been no write activity since the last log rotation.</div><div class="section-body"><div class="section2"><a id="command-check/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-check/category-command/option-archive-check"></a><div class="section3-title">Check Archive Option (<span class="id">--archive-check</span>)</div><div class="section-body"><div class="section-body-text">Check that WAL segments are present in the archive before backup completes.</div><div class="section-body-text">Checks that all WAL segments required to make the backup consistent are present in the WAL archive. It's a good idea to leave this as the default unless you are using another method for archiving.</div><pre class="code-block">default: y
example: --no-archive-check</pre></div></div><div class="section3"><a id="command-check/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-check/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-check/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-check/category-command/option-backup-standby"></a><div class="section3-title">Backup from Standby Option (<span class="id">--backup-standby</span>)</div><div class="section-body"><div class="section-body-text">Backup from the standby cluster.</div><div class="section-body-text">Enable backup from standby to reduce load on the master cluster. This option requires that both the <span class="host">master</span> and <span class="host">standby</span> hosts be configured.</div><pre class="code-block">default: n
example: --backup-standby</pre></div></div><div class="section3"><a id="command-check/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div></div></div><div class="section2"><a id="command-check/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-check/category-general/option-archive-timeout"></a><div class="section3-title">Archive Timeout Option (<span class="id">--archive-timeout</span>)</div><div class="section-body"><div class="section-body-text">Archive timeout.</div><div class="section-body-text">Set maximum time, in seconds, to wait for WAL segments to reach the archive. The timeout applies to the <span class="cmd">check</span> command and to the <span class="cmd">backup</span> command when waiting for WAL segments required to make the backup consistent to be archived.</div><pre class="code-block">default: 60
allowed: 0.1-86400
example: --archive-timeout=30</pre></div></div><div class="section3"><a id="command-check/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-check/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-check/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-check/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-check/category-general/option-db-timeout"></a><div class="section3-title">Database Timeout Option (<span class="id">--db-timeout</span>)</div><div class="section-body"><div class="section-body-text">Database query timeout.</div><div class="section-body-text">Sets the timeout, in seconds, for queries against the database. This includes the <span class="id">pg_start_backup()</span> and <span class="id">pg_stop_backup()</span> functions which can each take a substantial amount of time. Because of this the timeout should be kept high unless you know that these functions will return quickly (i.e. if you have set <span class="br-setting">startfast=y</span> and you know that the database cluster will not generate many WAL segments during the backup).</div><pre class="code-block">default: 1800
allowed: 0.1-604800
example: --db-timeout=600</pre></div></div><div class="section3"><a id="command-check/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-check/category-general/option-neutral-umask"></a><div class="section3-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: --no-neutral-umask</pre></div></div><div class="section3"><a id="command-check/category-general/option-online"></a><div class="section3-title">Online Option (<span class="id">--online</span>)</div><div class="section-body"><div class="section-body-text">Perform an online backup.</div><div class="section-body-text">Specifying --no-online prevents <span class="backrest">pgBackRest</span> from running <span class="id">pg_start_backup()</span> and <span class="id">pg_stop_backup()</span> on the database cluster. In order for this to work <span class="postgres">PostgreSQL</span> should be shut down and <span class="backrest">pgBackRest</span> will generate an error if it is not.<br/>
<br/>
The purpose of this option is to allow offline backups. The <span class="path">pg_xlog</span> directory is copied as-is and <span class="br-setting">archive-check</span> is automatically disabled for the backup.</div><pre class="code-block">default: y
example: --no-online</pre></div></div><div class="section3"><a id="command-check/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-check/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-check/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-check/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-check/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-check/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-check/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-check/category-stanza/option-db-cmd"></a><div class="section3-title">Database Host Command Option (<span class="id">--db-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the database host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and database hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --db-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-config"></a><div class="section3-title">Database Host Configuration Option (<span class="id">--db-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the database host. This is only required if the database host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --db-config=/etc/pgbackrest_db.conf</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-host"></a><div class="section3-title">Database Host Option (<span class="id">--db-host</span>)</div><div class="section-body"><div class="section-body-text">Cluster host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the database cluster host is different from the backup host.</div><pre class="code-block">example: --db-host=db.domain.com</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-path"></a><div class="section3-title">Database Path Option (<span class="id">--db-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or the database cluster it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">db-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: --db-path=/data/db</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-port"></a><div class="section3-title">Database Port Option (<span class="id">--db-port</span>)</div><div class="section-body"><div class="section-body-text">Cluster port.</div><div class="section-body-text">Port that <span class="postgres">PostgreSQL</span> is running on. This usually does not need to be specified as most database clusters run on the default port.</div><pre class="code-block">default: 5432
example: --db-port=6543</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-socket-path"></a><div class="section3-title">Database Socket Path Option (<span class="id">--db-socket-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster unix socket path.</div><div class="section-body-text">The unix socket directory that was specified when <span class="postgres">PostgreSQL</span> was started. <span class="backrest">pgBackRest</span> will automatically look in the standard location for your OS so there usually no need to specify this setting unless the socket directory was explicitly modified with the <span class="br-setting">unix_socket_directory</span> setting in <span class="file">postgressql.conf</span>.</div><pre class="code-block">example: --db-socket-path=/var/run/postgresql</pre></div></div><div class="section3"><a id="command-check/category-stanza/option-db-user"></a><div class="section3-title">Database User Option (<span class="id">--db-user</span>)</div><div class="section-body"><div class="section-body-text">Cluster host logon user when <span class="br-setting">db-host</span> is set.</div><div class="section-body-text">This user will also own the remote <span class="backrest">pgBackRest</span> process and will initiate connections to <span class="postgres">PostgreSQL</span>. For this to work correctly the user should be the <span class="postgres">PostgreSQL</span> database cluster owner which is generally <span class="id">postgres</span>, the default.</div><pre class="code-block">default: postgres
example: --db-user=db_owner</pre></div></div></div></div></div></div><div class="section1"><a id="command-expire"></a><div class="section1-title">Expire Command (<span class="id">expire</span>)</div><div class="section-intro"><span class="backrest">pgBackRest</span> does backup rotation but is not concerned with when the backups were created. If two full backups are configured for retention, <span class="backrest">pgBackRest</span> will keep two full backups no matter whether they occur two hours or two weeks apart.</div><div class="section-body"><div class="section2"><a id="command-expire/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-expire/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-expire/category-command/option-retention-archive"></a><div class="section3-title">Archive Retention Option (<span class="id">--retention-archive</span>)</div><div class="section-body"><div class="section-body-text">Number of backups worth of continuous WAL to retain.</div><div class="section-body-text">Note that the WAL segments required to make a backup consistent are always retained until the backup is expired regardless of how this option is configured.<br/>
<br/>
If this value is not set, then the archive to expire will default to the <span class="br-setting">retention-full</span> (or <span class="br-setting">retention-diff</span>) value corresponding to the <span class="br-setting">retention-archive-type</span> if set to <span class="br-setting">full</span> (or <span class="br-setting">diff</span>). This will ensure that WAL is only expired for backups that are already expired.<br/>
<br/>
This option must be set if <span class="br-setting">retention-archive-type</span> is set to <span class="br-setting">incr</span>. If disk space is at a premium, then this setting, in conjunction with <span class="br-setting">retention-archive-type</span>, can be used to aggressively expire WAL segments. However, doing so negates the ability to perform PITR from the backups with expired WAL and is therefore <b>not</b> recommended.</div><pre class="code-block">allowed: 1-999999999
example: --retention-archive=2</pre></div></div><div class="section3"><a id="command-expire/category-command/option-retention-archive-type"></a><div class="section3-title">Archive Retention Type Option (<span class="id">--retention-archive-type</span>)</div><div class="section-body"><div class="section-body-text">Backup type for WAL retention.</div><div class="section-body-text">If set to <span class="br-setting">full</span> <span class="backrest">pgBackRest</span> will keep archive logs for the number of full backups defined by <span class="br-setting">retention-archive</span>. If set to <span class="br-setting">diff</span> (differential) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full and differential backups defined by <span class="br-setting">retention-archive</span>, meaning if the last backup taken was a full backup, it will be counted as a differential for the purpose of retention. If set to <span class="br-setting">incr</span> (incremental) <span class="backrest">pgBackRest</span> will keep archive logs for the number of full, differential, and incremental backups defined by <span class="br-setting">retention-archive</span>. It is recommended that this setting not be changed from the default which will only expire WAL in conjunction with expiring full backups.</div><pre class="code-block">default: full
example: --retention-archive-type=diff</pre></div></div><div class="section3"><a id="command-expire/category-command/option-retention-diff"></a><div class="section3-title">Differential Retention Option (<span class="id">--retention-diff</span>)</div><div class="section-body"><div class="section-body-text">Number of differential backups to retain.</div><div class="section-body-text">When a differential backup expires, all incremental backups associated with the differential backup will also expire. When not defined all differential backups will be kept until the full backups they depend on expire.</div><pre class="code-block">allowed: 1-999999999
example: --retention-diff=3</pre></div></div><div class="section3"><a id="command-expire/category-command/option-retention-full"></a><div class="section3-title">Full Retention Option (<span class="id">--retention-full</span>)</div><div class="section-body"><div class="section-body-text">Number of full backups to retain.</div><div class="section-body-text">When a full backup expires, all differential and incremental backups associated with the full backup will also expire. When the option is not defined a warning will be issued. If indefinite retention is desired then set the option to the max value.</div><pre class="code-block">allowed: 1-999999999
example: --retention-full=2</pre></div></div></div></div><div class="section2"><a id="command-expire/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-expire/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-expire/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-expire/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-expire/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-expire/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-expire/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-expire/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-expire/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-expire/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-expire/category-stanza/option-db-cmd"></a><div class="section3-title">Database Host Command Option (<span class="id">--db-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the database host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and database hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --db-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-expire/category-stanza/option-db-config"></a><div class="section3-title">Database Host Configuration Option (<span class="id">--db-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the database host. This is only required if the database host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --db-config=/etc/pgbackrest_db.conf</pre></div></div><div class="section3"><a id="command-expire/category-stanza/option-db-host"></a><div class="section3-title">Database Host Option (<span class="id">--db-host</span>)</div><div class="section-body"><div class="section-body-text">Cluster host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the database cluster host is different from the backup host.</div><pre class="code-block">example: --db-host=db.domain.com</pre></div></div></div></div></div></div><div class="section1"><a id="command-help"></a><div class="section1-title">Help Command (<span class="id">help</span>)</div><div class="section-intro">Three levels of help are provided. If no command is specified then general help will be displayed. If a command is specified then a full description of the command will be displayed along with a list of valid options. If an option is specified in addition to a command then the a full description of the option as it applies to the command will be displayed.</div><div class="section-body"></div></div><div class="section1"><a id="command-info"></a><div class="section1-title">Info Command (<span class="id">info</span>)</div><div class="section-intro">The <span class="cmd">info</span> command operates on a single stanza or all stanzas. Text output is the default and gives a human-readable summary of backups for the stanza(s) requested. This format is subject to change with any release.<br/>
<br/>
For machine-readable output use <span class="br-setting">--output=json</span>. The JSON output contains far more information than the text output, however <b>this feature is currently experimental so the format may change between versions</b>.</div><div class="section-body"><div class="section2"><a id="command-info/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-info/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-info/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-info/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-info/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div><div class="section3"><a id="command-info/category-command/option-output"></a><div class="section3-title">Output Option (<span class="id">--output</span>)</div><div class="section-body"><div class="section-body-text">Output format.</div><div class="section-body-text">The following output types are supported:<br/>
<ul><li><span class="id">text</span> - Human-readable summary of backup information.</li><li><span class="id">json</span> - Exhaustive machine-readable backup information in JSON format.</li></ul></div><pre class="code-block">default: text
example: --output=json</pre></div></div></div></div><div class="section2"><a id="command-info/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-info/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-info/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-info/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-info/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-info/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-info/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-info/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-info/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-info/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-info/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-info/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-info/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div></div></div><div class="section1"><a id="command-restore"></a><div class="section1-title">Restore Command (<span class="id">restore</span>)</div><div class="section-intro">This command is generally run manually, but there are instances where it might be automated.</div><div class="section-body"><div class="section2"><a id="command-restore/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-restore/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-restore/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-restore/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-restore/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div><div class="section3"><a id="command-restore/category-command/option-db-include"></a><div class="section3-title">Include Database Option (<span class="id">--db-include</span>)</div><div class="section-body"><div class="section-body-text">Restore only specified databases.</div><div class="section-body-text">This feature allows only selected databases to be restored. Databases not specifically included will be restored as sparse, zeroed files to save space but still allow <span class="postgres">PostgreSQL</span> to perform recovery. After recovery the databases that were not included will not be accessible but can be removed with the <span class="id">drop database</span> command.<br/>
<br/>
Note that built-in databases (<span class="id">template0</span>, <span class="id">template1</span>, and <span class="id">postgres</span>) are always restored.<br/>
<br/>
The <span class="br-setting">--db-include</span> option can be passed multiple times to specify more than one database to include.</div><pre class="code-block">example: --db-include=db_main</pre></div></div><div class="section3"><a id="command-restore/category-command/option-delta"></a><div class="section3-title">Delta Option (<span class="id">--delta</span>)</div><div class="section-body"><div class="section-body-text">Restore using delta.</div><div class="section-body-text">By default the <span class="postgres">PostgreSQL</span> data and tablespace directories are expected to be present but empty. This option performs a delta restore using checksums.</div><pre class="code-block">default: n
example: --delta</pre></div></div><div class="section3"><a id="command-restore/category-command/option-force"></a><div class="section3-title">Force Option (<span class="id">--force</span>)</div><div class="section-body"><div class="section-body-text">Force a restore.</div><div class="section-body-text">By itself this option forces the <span class="postgres">PostgreSQL</span> data and tablespace paths to be completely overwritten. In combination with <span class="br-option">--delta</span> a timestamp/size delta will be performed instead of using checksums.</div><pre class="code-block">default: n
example: --force</pre></div></div><div class="section3"><a id="command-restore/category-command/option-link-all"></a><div class="section3-title">Link All Option (<span class="id">--link-all</span>)</div><div class="section-body"><div class="section-body-text">Restore all symlinks.</div><div class="section-body-text">By default symlinked directories and files are restored as normal directories and files in $PGDATA. This is because it may not be safe to restore symlinks to their original destinations on a system other than where the original backup was performed. This option restores all the symlinks just as they were on the original system where the backup was performed.</div><pre class="code-block">default: n
example: --link-all</pre></div></div><div class="section3"><a id="command-restore/category-command/option-link-map"></a><div class="section3-title">Link Map Option (<span class="id">--link-map</span>)</div><div class="section-body"><div class="section-body-text">Modify the destination of a symlink.</div><div class="section-body-text">Allows the destination file or path of a symlink to be changed on restore. This is useful for restoring to systems that have a different storage layout than the original system where the backup was generated.</div><pre class="code-block">example: --link-map=pg_xlog=/data/xlog</pre></div></div><div class="section3"><a id="command-restore/category-command/option-lock"></a><div class="section3-title">Lock Option (<span class="id">--lock</span>)</div><div class="section-body"><div class="section-body-text">Create a lock so restores on a stanza cannot run simultaneously.</div><div class="section-body-text">Locking during restores is enabled by default but can be disabled using --no-lock. Be <i>very</i> careful when disabling this option because simultaneous restores to a single path might result in a corrupt cluster.</div><pre class="code-block">default: y
example: --no-lock</pre></div></div><div class="section3"><a id="command-restore/category-command/option-recovery-option"></a><div class="section3-title">Recovery Option Option (<span class="id">--recovery-option</span>)</div><div class="section-body"><div class="section-body-text">Set an option in <span class="file">recovery.conf</span>.</div><div class="section-body-text">See http://www.postgresql.org/docs/X.X/static/recovery-config.html for details on recovery.conf options (replace X.X with your <span class="postgres">PostgreSQL</span> version). This option can be used multiple times.<br/>
<br/>
Note: The <span class="br-setting">restore_command</span> option will be automatically generated but can be overridden with this option. Be careful about specifying your own <span class="br-setting">restore_command</span> as <span class="backrest">pgBackRest</span> is designed to handle this for you. Target Recovery options (recovery_target_name, recovery_target_time, etc.) are generated automatically by <span class="backrest">pgBackRest</span> and should not be set with this option.<br/>
<br/>
Since <span class="backrest">pgBackRest</span> does not start <span class="postgres">PostgreSQL</span> after writing the <span class="file">recovery.conf</span> file, it is always possible to edit/check <span class="file">recovery.conf</span> before manually restarting.</div><pre class="code-block">example: --recovery-option=primary_conninfo=db.mydomain.com</pre></div></div><div class="section3"><a id="command-restore/category-command/option-set"></a><div class="section3-title">Set Option (<span class="id">--set</span>)</div><div class="section-body"><div class="section-body-text">Backup set to restore.</div><div class="section-body-text">The backup set to be restored. <span class="id">latest</span> will restore the latest backup, otherwise provide the name of the backup to restore.</div><pre class="code-block">default: latest
example: --set=20150131-153358F_20150131-153401I</pre></div></div><div class="section3"><a id="command-restore/category-command/option-tablespace-map"></a><div class="section3-title">Tablespace Map Option (<span class="id">--tablespace-map</span>)</div><div class="section-body"><div class="section-body-text">Restore a tablespace into the specified directory.</div><div class="section-body-text">Moves a tablespace to a new location during the restore. This is useful when tablespace locations are not the same on a replica, or an upgraded system has different mount points.<br/>
<br/>
Since <span class="postgres">PostgreSQL</span> 9.2 tablespace locations are not stored in pg_tablespace so moving tablespaces can be done with impunity. However, moving a tablespace to the <span class="br-setting">data_directory</span> is not recommended and may cause problems. For more information on moving tablespaces http://www.databasesoup.com/2013/11/moving-tablespaces.html is a good resource.</div><pre class="code-block">example: --tablespace-map=ts_01=/db/ts_01</pre></div></div><div class="section3"><a id="command-restore/category-command/option-tablespace-map-all"></a><div class="section3-title">Map All Tablespaces Option (<span class="id">--tablespace-map-all</span>)</div><div class="section-body"><div class="section-body-text">Restore all tablespaces into the specified directory.</div><div class="section-body-text">By default tablespaces are restored into their original locations and while this behavior can be modified by with the <span class="br-setting">tablespace-map</span> open it is sometime preferable to remap all tablespaces to a new directory all at once. This is particularly useful for development or staging systems that may not have the same storage layout as the original system where the backup was generated.<br/>
<br/>
The path specified will be the parent path used to create all the tablespaces in the backup.</div><pre class="code-block">example: --tablespace-map-all=/data/tablespace</pre></div></div><div class="section3"><a id="command-restore/category-command/option-target"></a><div class="section3-title">Target Option (<span class="id">--target</span>)</div><div class="section-body"><div class="section-body-text">Recovery target.</div><div class="section-body-text">Defines the recovery target when <span class="br-option">--type</span> is <span class="id">name</span>, <span class="id">xid</span>, or <span class="id">time</span>.</div><pre class="code-block">example: --target=2015-01-30 14:15:11 EST</pre></div></div><div class="section3"><a id="command-restore/category-command/option-target-action"></a><div class="section3-title">Target Action Option (<span class="id">--target-action</span>)</div><div class="section-body"><div class="section-body-text">Action to take when recovery target is reached.</div><div class="section-body-text">The following actions are supported:<br/>
<ul><li><span class="id">pause</span> - pause when recovery target is reached.</li><li><span class="id">promote</span> - promote and switch timeline when recovery target is reached.</li><li><span class="id">shutdown</span> - shutdown server when recovery target is reached.</li></ul>This option is only supported on <span class="postgres">PostgreSQL</span> >= 9.5.</div><pre class="code-block">default: pause
example: --target-action=promote</pre></div></div><div class="section3"><a id="command-restore/category-command/option-target-exclusive"></a><div class="section3-title">Target Exclusive Option (<span class="id">--target-exclusive</span>)</div><div class="section-body"><div class="section-body-text">Stop just before the recovery target is reached.</div><div class="section-body-text">Defines whether recovery to the target would be exclusive (the default is inclusive) and is only valid when <span class="br-option">--type</span> is <span class="id">time</span> or <span class="id">xid</span>. For example, using <span class="br-option">--target-exclusive</span> would exclude the contents of transaction <span class="id">1007</span> when <span class="br-option">--type=xid</span> and <span class="br-option">--target=1007</span>. See the <span class="br-setting">recovery_target_inclusive</span> option in the <span class="postgres">PostgreSQL</span> docs for more information.</div><pre class="code-block">default: n
example: --no-target-exclusive</pre></div></div><div class="section3"><a id="command-restore/category-command/option-target-timeline"></a><div class="section3-title">Target Timeline Option (<span class="id">--target-timeline</span>)</div><div class="section-body"><div class="section-body-text">Recover along a timeline.</div><div class="section-body-text">See <span class="br-setting">recovery_target_timeline</span> in the <span class="postgres">PostgreSQL</span> docs for more information.</div><pre class="code-block">example: --target-timeline=3</pre></div></div><div class="section3"><a id="command-restore/category-command/option-type"></a><div class="section3-title">Type Option (<span class="id">--type</span>)</div><div class="section-body"><div class="section-body-text">Recovery type.</div><div class="section-body-text">The following recovery types are supported:<br/>
<ul><li><span class="id">default</span> - recover to the end of the archive stream.</li><li><span class="id">immediate</span> - recover only until the database becomes consistent. This option is only supported on <span class="postgres">PostgreSQL</span> >= 9.4.</li><li><span class="id">name</span> - recover the restore point specified in <span class="br-option">--target</span>.</li><li><span class="id">xid</span> - recover to the transaction id specified in <span class="br-option">--target</span>.</li><li><span class="id">time</span> - recover to the time specified in <span class="br-option">--target</span>.</li><li><span class="id">preserve</span> - preserve the existing <span class="file">recovery.conf</span> file.</li><li><span class="id">none</span> - no <span class="file">recovery.conf</span> file is written so <span class="postgres">PostgreSQL</span> will attempt to achieve consistency using WAL segments present in <span class="path">pg_xlog</span>. Provide the required WAL segments or use the <span class="br-setting">archive-copy</span> setting to include them with the backup.</li></ul></div><pre class="code-block">default: default
example: --type=xid</pre></div></div></div></div><div class="section2"><a id="command-restore/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-restore/category-general/option-buffer-size"></a><div class="section3-title">Buffer Size Option (<span class="id">--buffer-size</span>)</div><div class="section-body"><div class="section-body-text">Buffer size for file operations.</div><div class="section-body-text">Set the buffer size used for copy, compress, and uncompress functions. A maximum of 3 buffers will be in use at a time per process. An additional maximum of 256K per process may be used for zlib buffers.</div><pre class="code-block">default: 4194304
allowed: 16384-8388608
example: --buffer-size=32768</pre></div></div><div class="section3"><a id="command-restore/category-general/option-compress"></a><div class="section3-title">Compress Option (<span class="id">--compress</span>)</div><div class="section-body"><div class="section-body-text">Use gzip file compression.</div><div class="section-body-text">Backup files are compatible with command-line gzip tools.</div><pre class="code-block">default: y
example: --no-compress</pre></div></div><div class="section3"><a id="command-restore/category-general/option-compress-level"></a><div class="section3-title">Compress Level Option (<span class="id">--compress-level</span>)</div><div class="section-body"><div class="section-body-text">Compression level for stored files.</div><div class="section-body-text">Sets the zlib level to be used for file compression when <span class="br-setting">compress=y</span>.</div><pre class="code-block">default: 6
allowed: 0-9
example: --compress-level=9</pre></div></div><div class="section3"><a id="command-restore/category-general/option-compress-level-network"></a><div class="section3-title">Network Compress Level Option (<span class="id">--compress-level-network</span>)</div><div class="section-body"><div class="section-body-text">Compression level for network transfer when <span class="br-setting">compress=n</span>.</div><div class="section-body-text">Sets the zlib level to be used for protocol compression when <span class="br-setting">compress=n</span> and the database cluster is not on the same host as the backup. Protocol compression is used to reduce network traffic but can be disabled by setting <span class="br-setting">compress-level-network=0</span>. When <span class="br-setting">compress=y</span> the <span class="br-setting">compress-level-network</span> setting is ignored and <span class="br-setting">compress-level</span> is used instead so that the file is only compressed once. SSH compression is always disabled.</div><pre class="code-block">default: 3
allowed: 0-9
example: --compress-level-network=1</pre></div></div><div class="section3"><a id="command-restore/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-restore/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-restore/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-restore/category-general/option-neutral-umask"></a><div class="section3-title">Neutral Umask Option (<span class="id">--neutral-umask</span>)</div><div class="section-body"><div class="section-body-text">Use a neutral umask.</div><div class="section-body-text">Sets the umask to 0000 so modes in the repository are created in a sensible way. The default directory mode is 0750 and default file mode is 0640. The lock and log directories set the directory and file mode to 0770 and 0660 respectively.<br/>
<br/>
To use the executing user's umask instead specify <span class="br-setting">neutral-umask=n</span> in the config file or <span class="br-setting">--no-neutral-umask</span> on the command line.</div><pre class="code-block">default: y
example: --no-neutral-umask</pre></div></div><div class="section3"><a id="command-restore/category-general/option-process-max"></a><div class="section3-title">Process Maximum Option (<span class="id">--process-max</span>)</div><div class="section-body"><div class="section-body-text">Max processes to use for compress/transfer.</div><div class="section-body-text">Each process will perform compression and transfer to make the command run faster, but don't set <span class="br-setting">process-max</span> so high that it impacts database performance.</div><pre class="code-block">default: 1
allowed: 1-96
example: --process-max=4</pre></div></div><div class="section3"><a id="command-restore/category-general/option-protocol-timeout"></a><div class="section3-title">Protocol Timeout Option (<span class="id">--protocol-timeout</span>)</div><div class="section-body"><div class="section-body-text">Protocol timeout.</div><div class="section-body-text">Sets the timeout, in seconds, that the master or remote process will wait for a new message to be received on the protocol layer. This prevents processes from waiting indefinitely for a message. The <span class="br-option">protocol-timeout</span> option must be greater than the <span class="br-option">db-timeout</span> option.</div><pre class="code-block">default: 1830
allowed: 0.1-604800
example: --protocol-timeout=630</pre></div></div><div class="section3"><a id="command-restore/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-restore/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-restore/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-restore/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-restore/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-restore/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-restore/category-stanza/option-db-path"></a><div class="section3-title">Database Path Option (<span class="id">--db-path</span>)</div><div class="section-body"><div class="section-body-text">Cluster data directory.</div><div class="section-body-text">This should be the same as the <span class="br-setting">data_directory</span> setting in <span class="file">postgresql.conf</span>. Even though this value can be read from <span class="file">postgresql.conf</span> or the database cluster it is prudent to set it in case those resources are not available during a restore or offline backup scenario.<br/>
<br/>
The <span class="br-setting">db-path</span> option is tested against the value reported by <span class="postgres">PostgreSQL</span> on every online backup so it should always be current.</div><pre class="code-block">example: --db-path=/data/db</pre></div></div></div></div></div></div><div class="section1"><a id="command-start"></a><div class="section1-title">Start Command (<span class="id">start</span>)</div><div class="section-intro">If the <span class="backrest">pgBackRest</span> processes were previously stopped using the <span class="cmd">stop</span> command then they can be started again using the <span class="cmd">start</span> command. Note that this will not immediately start up any <span class="backrest">pgBackRest</span> processes but they are allowed to run.</div><div class="section-body"><div class="section2"><a id="command-start/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-start/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-start/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-start/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-start/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div></div></div><div class="section2"><a id="command-start/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-start/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-start/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-start/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-start/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-start/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-start/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-start/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-start/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-start/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-start/category-stanza/option-db-cmd"></a><div class="section3-title">Database Host Command Option (<span class="id">--db-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the database host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and database hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --db-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-start/category-stanza/option-db-config"></a><div class="section3-title">Database Host Configuration Option (<span class="id">--db-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the database host. This is only required if the database host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --db-config=/etc/pgbackrest_db.conf</pre></div></div><div class="section3"><a id="command-start/category-stanza/option-db-host"></a><div class="section3-title">Database Host Option (<span class="id">--db-host</span>)</div><div class="section-body"><div class="section-body-text">Cluster host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the database cluster host is different from the backup host.</div><pre class="code-block">example: --db-host=db.domain.com</pre></div></div></div></div></div></div><div class="section1"><a id="command-stop"></a><div class="section1-title">Stop Command (<span class="id">stop</span>)</div><div class="section-intro">Does not allow any new <span class="backrest">pgBackRest</span> processes to run. By default running processes will be allowed to complete successfully. Use the <span class="br-setting">--force</span> option to terminate running processes.<br/>
<br/>
<span class="backrest">pgBackRest</span> processes will return an error if they are run after the stop command completes.</div><div class="section-body"><div class="section2"><a id="command-stop/category-command"></a><div class="section2-title">Command Options</div><div class="section-body"><div class="section3"><a id="command-stop/category-command/option-backup-cmd"></a><div class="section3-title">Backup Host Command Option (<span class="id">--backup-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the backup host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and backup hosts. If not defined, the backup host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --backup-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-stop/category-command/option-backup-config"></a><div class="section3-title">Backup Host Configuration Option (<span class="id">--backup-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> backup host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the backup host. This is only required if the backup host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --backup-config=/etc/pgbackrest_backup.conf</pre></div></div><div class="section3"><a id="command-stop/category-command/option-backup-host"></a><div class="section3-title">Backup Host Option (<span class="id">--backup-host</span>)</div><div class="section-body"><div class="section-body-text">Backup host when operating remotely via SSH.</div><div class="section-body-text">Make sure that trusted SSH authentication is configured between the db host and the backup host.<br/>
<br/>
When backing up to a locally mounted network filesystem this setting is not required.</div><pre class="code-block">example: --backup-host=backup.domain.com</pre></div></div><div class="section3"><a id="command-stop/category-command/option-backup-user"></a><div class="section3-title">Backup User Option (<span class="id">--backup-user</span>)</div><div class="section-body"><div class="section-body-text">Backup host user when <span class="br-setting">backup-host</span> is set.</div><div class="section-body-text">Defines the user that will be used for operations on the backup server. Preferably this is not the <span class="id">postgres</span> user but rather some other user like <span class="id">backrest</span>. If <span class="postgres">PostgreSQL</span> runs on the backup server the <span class="id">postgres</span> user can be placed in the <span class="id">backrest</span> group so it has read permissions on the repository without being able to damage the contents accidentally.</div><pre class="code-block">default: backrest
example: --backup-user=backrest</pre></div></div><div class="section3"><a id="command-stop/category-command/option-force"></a><div class="section3-title">Force Option (<span class="id">--force</span>)</div><div class="section-body"><div class="section-body-text">Force all <span class="backrest">pgBackRest</span> processes to stop.</div><div class="section-body-text">This option will send TERM signals to all running <span class="backrest">pgBackRest</span> processes to effect a graceful but immediate shutdown. Note that this will also shutdown processes that were initiated on another system but have remotes running on the current system. For instance, if a backup was started on the backup server then running <span class="cmd">stop --force</span> on the database server will shutdown the backup process on the backup server.</div><pre class="code-block">default: n
example: --force</pre></div></div></div></div><div class="section2"><a id="command-stop/category-general"></a><div class="section2-title">General Options</div><div class="section-body"><div class="section3"><a id="command-stop/category-general/option-config"></a><div class="section3-title">Config Option (<span class="id">--config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> configuration file.</div><div class="section-body-text">Use this option to specify a different configuration file than the default.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --config=/var/lib/backrest/pgbackrest.conf</pre></div></div><div class="section3"><a id="command-stop/category-general/option-lock-path"></a><div class="section3-title">Lock Path Option (<span class="id">--lock-path</span>)</div><div class="section-body"><div class="section-body-text">Path where lock files are stored.</div><div class="section-body-text">The lock path provides a location for <span class="backrest">pgBackRest</span> to create lock files to prevent conflicting operations from being run concurrently.</div><pre class="code-block">default: /tmp/pgbackrest
example: --lock-path=/backup/db/lock</pre></div></div><div class="section3"><a id="command-stop/category-general/option-log-path"></a><div class="section3-title">Log Path Option (<span class="id">--log-path</span>)</div><div class="section-body"><div class="section-body-text">Path where log files are stored.</div><div class="section-body-text">The log path provides a location for <span class="backrest">pgBackRest</span> to store log files. Note that if <span class="br-setting">log-level-file=none</span> then no log path is required.</div><pre class="code-block">default: /var/log/pgbackrest
example: --log-path=/backup/db/log</pre></div></div><div class="section3"><a id="command-stop/category-general/option-repo-path"></a><div class="section3-title">Repository Path Option (<span class="id">--repo-path</span>)</div><div class="section-body"><div class="section-body-text">Repository path where WAL segments and backups stored.</div><div class="section-body-text">The repository is where <span class="backrest">pgBackRest</span> stores backup and archives WAL segments.<br/>
<br/>
If you are new to backup then it will be difficult to estimate in advance how much space you'll need. The best thing to do is take some backups then record the size of different types of backups (full/incr/diff) and measure the amount of WAL generated per day. This will give you a general idea of how much space you'll need, though of course requirements will likely change over time as your database evolves.</div><pre class="code-block">default: /var/lib/pgbackrest
example: --repo-path=/backup/db/backrest</pre></div></div><div class="section3"><a id="command-stop/category-general/option-stanza"></a><div class="section3-title">Stanza Option (<span class="id">--stanza</span>)</div><div class="section-body"><div class="section-body-text">Command stanza.</div><div class="section-body-text">A stanza is the configuration for a <span class="postgres">PostgreSQL</span> database cluster that defines where it is located, how it will be backed up, archiving options, etc. Most db servers will only have one Postgres database cluster and therefore one stanza, whereas backup servers will have a stanza for every database cluster that needs to be backed up.<br/>
<br/>
It is tempting to name the stanza after the primary cluster but a better name describes the databases contained in the cluster. Because the stanza name will be used for the primary and all replicas it is more appropriate to choose a name that describes the actual function of the cluster, such as app or dw, rather than the local cluster name, such as main or prod.</div><pre class="code-block">example: --stanza=main</pre></div></div></div></div><div class="section2"><a id="command-stop/category-log"></a><div class="section2-title">Log Options</div><div class="section-body"><div class="section3"><a id="command-stop/category-log/option-log-level-console"></a><div class="section3-title">Console Log Level Option (<span class="id">--log-level-console</span>)</div><div class="section-body"><div class="section-body-text">Level for console logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: warn
example: --log-level-console=error</pre></div></div><div class="section3"><a id="command-stop/category-log/option-log-level-file"></a><div class="section3-title">File Log Level Option (<span class="id">--log-level-file</span>)</div><div class="section-body"><div class="section-body-text">Level for file logging.</div><div class="section-body-text">The following log levels are supported:<br/>
<ul><li><span class="id">off</span> - No logging at all (not recommended)</li><li><span class="id">error</span> - Log only errors</li><li><span class="id">warn</span> - Log warnings and errors</li><li><span class="id">info</span> - Log info, warnings, and errors</li><li><span class="id">detail</span> - Log detail, info, warnings, and errors</li><li><span class="id">debug</span> - Log debug, detail, info, warnings, and errors</li><li><span class="id">trace</span> - Log trace (very verbose debugging), debug, info, warnings, and errors</li></ul></div><pre class="code-block">default: info
example: --log-level-file=debug</pre></div></div></div></div><div class="section2"><a id="command-stop/category-stanza"></a><div class="section2-title">Stanza Options</div><div class="section-body"><div class="section3"><a id="command-stop/category-stanza/option-db-cmd"></a><div class="section3-title">Database Host Command Option (<span class="id">--db-cmd</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> exe path on the database host.</div><div class="section-body-text">Required only if the path to <span class="file">pgbackrest</span> is different on the local and database hosts. If not defined, the database host exe path will be set the same as the local exe path.</div><pre class="code-block">default: [INSTALL-PATH]/pgbackrest
example: --db-cmd=/usr/lib/backrest/bin/pgbackrest</pre></div></div><div class="section3"><a id="command-stop/category-stanza/option-db-config"></a><div class="section3-title">Database Host Configuration Option (<span class="id">--db-config</span>)</div><div class="section-body"><div class="section-body-text"><span class="backrest">pgBackRest</span> database host configuration file.</div><div class="section-body-text">Sets the location of the configuration file on the database host. This is only required if the database host configuration file is in a different location than the local configuration file.</div><pre class="code-block">default: /etc/pgbackrest.conf
example: --db-config=/etc/pgbackrest_db.conf</pre></div></div><div class="section3"><a id="command-stop/category-stanza/option-db-host"></a><div class="section3-title">Database Host Option (<span class="id">--db-host</span>)</div><div class="section-body"><div class="section-body-text">Cluster host for operating remotely via SSH.</div><div class="section-body-text">Used for backups where the database cluster host is different from the backup host.</div><pre class="code-block">example: --db-host=db.domain.com</pre></div></div></div></div></div></div><div class="section1"><a id="command-version"></a><div class="section1-title">Version Command (<span class="id">version</span>)</div><div class="section-intro">Displays installed <span class="backrest">pgBackRest</span> version.</div><div class="section-body"></div></div></div><div class="page-footer">Copyright &copy; 2015-2016, The PostgreSQL Global Development Group, <a href="https://github.com/pgbackrest/pgbackrest/blob/master/LICENSE">MIT License</a>.  Updated September 7, 2016</div></body></html>